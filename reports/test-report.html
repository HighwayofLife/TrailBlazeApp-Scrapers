<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <title id="head-title">test-report.html</title>
      <style type="text/css">body {
  font-family: Helvetica, Arial, sans-serif;
  font-size: 12px;
  /* do not increase min-width as some may use split screens */
  min-width: 800px;
  color: #999;
}

h1 {
  font-size: 24px;
  color: black;
}

h2 {
  font-size: 16px;
  color: black;
}

p {
  color: black;
}

a {
  color: #999;
}

table {
  border-collapse: collapse;
}

/******************************
 * SUMMARY INFORMATION
 ******************************/
#environment td {
  padding: 5px;
  border: 1px solid #e6e6e6;
  vertical-align: top;
}
#environment tr:nth-child(odd) {
  background-color: #f6f6f6;
}
#environment ul {
  margin: 0;
  padding: 0 20px;
}

/******************************
 * TEST RESULT COLORS
 ******************************/
span.passed,
.passed .col-result {
  color: green;
}

span.skipped,
span.xfailed,
span.rerun,
.skipped .col-result,
.xfailed .col-result,
.rerun .col-result {
  color: orange;
}

span.error,
span.failed,
span.xpassed,
.error .col-result,
.failed .col-result,
.xpassed .col-result {
  color: red;
}

.col-links__extra {
  margin-right: 3px;
}

/******************************
 * RESULTS TABLE
 *
 * 1. Table Layout
 * 2. Extra
 * 3. Sorting items
 *
 ******************************/
/*------------------
 * 1. Table Layout
 *------------------*/
#results-table {
  border: 1px solid #e6e6e6;
  color: #999;
  font-size: 12px;
  width: 100%;
}
#results-table th,
#results-table td {
  padding: 5px;
  border: 1px solid #e6e6e6;
  text-align: left;
}
#results-table th {
  font-weight: bold;
}

/*------------------
 * 2. Extra
 *------------------*/
.logwrapper {
  max-height: 230px;
  overflow-y: scroll;
  background-color: #e6e6e6;
}
.logwrapper.expanded {
  max-height: none;
}
.logwrapper.expanded .logexpander:after {
  content: "collapse [-]";
}
.logwrapper .logexpander {
  z-index: 1;
  position: sticky;
  top: 10px;
  width: max-content;
  border: 1px solid;
  border-radius: 3px;
  padding: 5px 7px;
  margin: 10px 0 10px calc(100% - 80px);
  cursor: pointer;
  background-color: #e6e6e6;
}
.logwrapper .logexpander:after {
  content: "expand [+]";
}
.logwrapper .logexpander:hover {
  color: #000;
  border-color: #000;
}
.logwrapper .log {
  min-height: 40px;
  position: relative;
  top: -50px;
  height: calc(100% + 50px);
  border: 1px solid #e6e6e6;
  color: black;
  display: block;
  font-family: "Courier New", Courier, monospace;
  padding: 5px;
  padding-right: 80px;
  white-space: pre-wrap;
}

div.media {
  border: 1px solid #e6e6e6;
  float: right;
  height: 240px;
  margin: 0 5px;
  overflow: hidden;
  width: 320px;
}

.media-container {
  display: grid;
  grid-template-columns: 25px auto 25px;
  align-items: center;
  flex: 1 1;
  overflow: hidden;
  height: 200px;
}

.media-container--fullscreen {
  grid-template-columns: 0px auto 0px;
}

.media-container__nav--right,
.media-container__nav--left {
  text-align: center;
  cursor: pointer;
}

.media-container__viewport {
  cursor: pointer;
  text-align: center;
  height: inherit;
}
.media-container__viewport img,
.media-container__viewport video {
  object-fit: cover;
  width: 100%;
  max-height: 100%;
}

.media__name,
.media__counter {
  display: flex;
  flex-direction: row;
  justify-content: space-around;
  flex: 0 0 25px;
  align-items: center;
}

.collapsible td:not(.col-links) {
  cursor: pointer;
}
.collapsible td:not(.col-links):hover::after {
  color: #bbb;
  font-style: italic;
  cursor: pointer;
}

.col-result {
  width: 130px;
}
.col-result:hover::after {
  content: " (hide details)";
}

.col-result.collapsed:hover::after {
  content: " (show details)";
}

#environment-header h2:hover::after {
  content: " (hide details)";
  color: #bbb;
  font-style: italic;
  cursor: pointer;
  font-size: 12px;
}

#environment-header.collapsed h2:hover::after {
  content: " (show details)";
  color: #bbb;
  font-style: italic;
  cursor: pointer;
  font-size: 12px;
}

/*------------------
 * 3. Sorting items
 *------------------*/
.sortable {
  cursor: pointer;
}
.sortable.desc:after {
  content: " ";
  position: relative;
  left: 5px;
  bottom: -12.5px;
  border: 10px solid #4caf50;
  border-bottom: 0;
  border-left-color: transparent;
  border-right-color: transparent;
}
.sortable.asc:after {
  content: " ";
  position: relative;
  left: 5px;
  bottom: 12.5px;
  border: 10px solid #4caf50;
  border-top: 0;
  border-left-color: transparent;
  border-right-color: transparent;
}

.hidden, .summary__reload__button.hidden {
  display: none;
}

.summary__data {
  flex: 0 0 550px;
}
.summary__reload {
  flex: 1 1;
  display: flex;
  justify-content: center;
}
.summary__reload__button {
  flex: 0 0 300px;
  display: flex;
  color: white;
  font-weight: bold;
  background-color: #4caf50;
  text-align: center;
  justify-content: center;
  align-items: center;
  border-radius: 3px;
  cursor: pointer;
}
.summary__reload__button:hover {
  background-color: #46a049;
}
.summary__spacer {
  flex: 0 0 550px;
}

.controls {
  display: flex;
  justify-content: space-between;
}

.filters,
.collapse {
  display: flex;
  align-items: center;
}
.filters button,
.collapse button {
  color: #999;
  border: none;
  background: none;
  cursor: pointer;
  text-decoration: underline;
}
.filters button:hover,
.collapse button:hover {
  color: #ccc;
}

.filter__label {
  margin-right: 10px;
}

      </style>
    
  </head>
  <body>
    <h1 id="title">test-report.html</h1>
    <p>Report generated on 25-Apr-2025 at 16:36:02 by <a href="https://pypi.python.org/pypi/pytest-html">pytest-html</a>
        v4.1.1</p>
    <div id="environment-header">
      <h2>Environment</h2>
    </div>
    <table id="environment"></table>
    <!-- TEMPLATES -->
      <template id="template_environment_row">
      <tr>
        <td></td>
        <td></td>
      </tr>
    </template>
    <template id="template_results-table__body--empty">
      <tbody class="results-table-row">
        <tr id="not-found-message">
          <td colspan="4">No results found. Check the filters.</th>
        </tr>
    </template>
    <template id="template_results-table__tbody">
      <tbody class="results-table-row">
        <tr class="collapsible">
        </tr>
        <tr class="extras-row">
          <td class="extra" colspan="4">
            <div class="extraHTML"></div>
            <div class="media">
              <div class="media-container">
                  <div class="media-container__nav--left"><</div>
                  <div class="media-container__viewport">
                    <img src="" />
                    <video controls>
                      <source src="" type="video/mp4">
                    </video>
                  </div>
                  <div class="media-container__nav--right">></div>
                </div>
                <div class="media__name"></div>
                <div class="media__counter"></div>
            </div>
            <div class="logwrapper">
              <div class="logexpander"></div>
              <div class="log"></div>
            </div>
          </td>
        </tr>
      </tbody>
    </template>
    <!-- END TEMPLATES -->
    <div class="summary">
      <div class="summary__data">
        <h2>Summary</h2>
        <div class="additional-summary prefix">
        </div>
        <p class="run-count">93 tests took 00:00:08.</p>
        <p class="filter">(Un)check the boxes to filter the results.</p>
        <div class="summary__reload">
          <div class="summary__reload__button hidden" onclick="location.reload()">
            <div>There are still tests running. <br />Reload this page to get the latest results!</div>
          </div>
        </div>
        <div class="summary__spacer"></div>
        <div class="controls">
          <div class="filters">
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="failed" />
            <span class="failed">3 Failed,</span>
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="passed" />
            <span class="passed">90 Passed,</span>
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="skipped" disabled/>
            <span class="skipped">0 Skipped,</span>
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="xfailed" disabled/>
            <span class="xfailed">0 Expected failures,</span>
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="xpassed" disabled/>
            <span class="xpassed">0 Unexpected passes,</span>
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="error" disabled/>
            <span class="error">0 Errors,</span>
            <input checked="true" class="filter" name="filter_checkbox" type="checkbox" data-test-result="rerun" disabled/>
            <span class="rerun">0 Reruns</span>
          </div>
          <div class="collapse">
            <button id="show_all_details">Show all details</button>&nbsp;/&nbsp;<button id="hide_all_details">Hide all details</button>
          </div>
        </div>
      </div>
      <div class="additional-summary summary">
      </div>
      <div class="additional-summary postfix">
      </div>
    </div>
    <table id="results-table">
      <thead id="results-table-head">
        <tr>
          <th class="sortable" data-column-type="result">Result</th>
          <th class="sortable" data-column-type="testId">Test</th>
          <th class="sortable" data-column-type="duration">Duration</th>
          <th>Links</th>
        </tr>
      </thead>
    </table>
  </body>
  <footer>
    <div id="data-container" data-jsonblob="{&#34;environment&#34;: {&#34;Python&#34;: &#34;3.11.11&#34;, &#34;Platform&#34;: &#34;Linux-6.10.14-linuxkit-aarch64-with-glibc2.36&#34;, &#34;Packages&#34;: {&#34;pytest&#34;: &#34;8.3.5&#34;, &#34;pluggy&#34;: &#34;1.5.0&#34;}, &#34;Plugins&#34;: {&#34;metadata&#34;: &#34;3.1.1&#34;, &#34;mock&#34;: &#34;3.14.0&#34;, &#34;html&#34;: &#34;4.1.1&#34;, &#34;cov&#34;: &#34;6.0.0&#34;, &#34;xdist&#34;: &#34;3.6.1&#34;}}, &#34;tests&#34;: {&#34;tests/test_aerc_scraper.py::test_sanity&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_aerc_scraper.py::test_sanity&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_aerc_scraper.py::test_sanity&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_aerc_scraper.py::test_determine_event_type&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_aerc_scraper.py::test_determine_event_type&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_aerc_scraper.py::test_determine_event_type&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_aerc_scraper.py::test_determine_has_intro_ride&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_aerc_scraper.py::test_determine_has_intro_ride&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_aerc_scraper.py::test_determine_has_intro_ride&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_aerc_scraper.py::test_extract_details_past_event&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_aerc_scraper.py::test_extract_details_past_event&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_aerc_scraper.py::test_extract_details_past_event&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_aerc_scraper.py::test_extract_manager_info_found&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_aerc_scraper.py::test_extract_manager_info_found&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_aerc_scraper.py::test_extract_manager_info_found&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_aerc_scraper.py::test_extract_manager_info_fallback&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_aerc_scraper.py::test_extract_manager_info_fallback&#34;, &#34;duration&#34;: &#34;3 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_aerc_scraper.py::test_extract_manager_info_fallback&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;3 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-04-25 16:35:53 - app.base_scraper.AERC - WARNING - \ud83e\udd37 Could not extract manager name.\n\n------------------------------ Captured log call -------------------------------\nWARNING  app.base_scraper.AERC:logging_manager.py:79 \ud83e\udd37 Could not extract manager name.\n\n&#34;}], &#34;tests/test_aerc_scraper.py::test_get_season_ids_from_calendar_page&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_aerc_scraper.py::test_get_season_ids_from_calendar_page&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_aerc_scraper.py::test_get_season_ids_from_calendar_page&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udd0d Found season ID/year map: {&amp;#x27;63&amp;#x27;: 2025}\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udd0d Found season ID/year map: {&amp;#x27;99&amp;#x27;: 0}\n\n------------------------------ Captured log call -------------------------------\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udd0d Found season ID/year map: {&amp;#x27;63&amp;#x27;: 2025}\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udd0d Found season ID/year map: {&amp;#x27;99&amp;#x27;: 0}\n\n&#34;}], &#34;tests/test_aerc_scraper.py::test_init&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_aerc_scraper.py::test_init&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_aerc_scraper.py::test_init&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_aerc_scraper.py::test_scrape_with_sample_data&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_aerc_scraper.py::test_scrape_with_sample_data&#34;, &#34;duration&#34;: &#34;96 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_aerc_scraper.py::test_scrape_with_sample_data&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;96 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udd0d Found season ID/year map: {}\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udd0d Extracted season ID/year map from calendar page: {&amp;#x27;0&amp;#x27;: 0}\n2025-04-25 16:35:53 - app.base_scraper.AERC - WARNING - \u26a0\ufe0f No season IDs found for current/future years (2025, 2026). Using season IDs for most recent years []: []\n2025-04-25 16:35:53 - app.base_scraper.AERC - WARNING - \u26a0\ufe0f No valid season IDs with year found. Using all found season IDs: [&amp;#x27;0&amp;#x27;]\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udcd1 Fetched event HTML length: 26557\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udcdc Found 8 calendar rows\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udd0d LLM utility ran but found no address data for ride 14587\n2025-04-25 16:35:53 - app.metrics_manager.AERC - WARNING - \u26a0\ufe0f Created new metric &amp;#x27;llm_address_extractions_nodata&amp;#x27; that wasn&amp;#x27;t in standard metrics\n2025-04-25 16:35:53 - app.metrics_manager.AERC - WARNING - \u26a0\ufe0f Created new metric &amp;#x27;events_extracted&amp;#x27; that wasn&amp;#x27;t in standard metrics\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udd0d LLM utility ran but found no address data for ride 14546\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udd0d LLM utility ran but found no address data for ride 14457\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udd0d LLM utility ran but found no address data for ride 14457\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udd0d LLM utility ran but found no address data for ride 14457\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udd0d LLM utility ran but found no address data for ride 14526\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udd0d LLM utility ran but found no address data for ride 14492\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udcc6 Past event detected (Ride ID: 14446). Skipping results parsing for DB compatibility.\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udd0d LLM utility ran but found no address data for ride 14446\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - Extracted 8 events\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\uddc2\ufe0f Consolidating 8 events\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \u2728 Consolidated to 6 events (1 multi-day events)\n2025-04-25 16:35:53 - app.metrics_manager.AERC - WARNING - \u26a0\ufe0f Created new metric &amp;#x27;events_consolidated&amp;#x27; that wasn&amp;#x27;t in standard metrics\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \u2705 Consolidated 6 events.\n\n\ud83d\ude80 Scraping Summary for AERC \ud83d\ude80\nEvent Metrics:\n\ud83d\udcdc Raw Event Rows Found: 8\n\ud83d\udcc6 Initial Events Extracted: 8\n\u2728 Final Events (Consolidated): 0\n\ud83d\udcc5 Multi-Day Events: 1\n\nDatabase Metrics:\n\ud83d\udcbe Database Inserts: 0\n\ud83d\udd04 Database Updates: 0\n\nCache Metrics:\n\u2705 Cache Hits: 0\n\u274c Cache Misses: 0\n\nCustom Metrics:\nllm_address_extractions_nodata: 8\nevents_extracted: 8\nevents_consolidated: 6\n\n\u2705 All counts are valid!\n\n------------------------------ Captured log call -------------------------------\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udd0d Found season ID/year map: {}\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udd0d Extracted season ID/year map from calendar page: {&amp;#x27;0&amp;#x27;: 0}\nWARNING  app.base_scraper.AERC:logging_manager.py:79 \u26a0\ufe0f No season IDs found for current/future years (2025, 2026). Using season IDs for most recent years []: []\nWARNING  app.base_scraper.AERC:logging_manager.py:79 \u26a0\ufe0f No valid season IDs with year found. Using all found season IDs: [&amp;#x27;0&amp;#x27;]\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udcd1 Fetched event HTML length: 26557\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udcdc Found 8 calendar rows\nWARNING  app.llm_utility:llm_utility.py:59 LLM_API_ENDPOINT or LLM_API_KEY is not configured. Skipping LLM extraction.\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udd0d LLM utility ran but found no address data for ride 14587\nWARNING  app.metrics_manager.AERC:logging_manager.py:79 \u26a0\ufe0f Created new metric &amp;#x27;llm_address_extractions_nodata&amp;#x27; that wasn&amp;#x27;t in standard metrics\nWARNING  app.metrics_manager.AERC:logging_manager.py:79 \u26a0\ufe0f Created new metric &amp;#x27;events_extracted&amp;#x27; that wasn&amp;#x27;t in standard metrics\nWARNING  app.llm_utility:llm_utility.py:59 LLM_API_ENDPOINT or LLM_API_KEY is not configured. Skipping LLM extraction.\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udd0d LLM utility ran but found no address data for ride 14546\nWARNING  app.llm_utility:llm_utility.py:59 LLM_API_ENDPOINT or LLM_API_KEY is not configured. Skipping LLM extraction.\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udd0d LLM utility ran but found no address data for ride 14457\nWARNING  app.llm_utility:llm_utility.py:59 LLM_API_ENDPOINT or LLM_API_KEY is not configured. Skipping LLM extraction.\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udd0d LLM utility ran but found no address data for ride 14457\nWARNING  app.llm_utility:llm_utility.py:59 LLM_API_ENDPOINT or LLM_API_KEY is not configured. Skipping LLM extraction.\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udd0d LLM utility ran but found no address data for ride 14457\nWARNING  app.llm_utility:llm_utility.py:59 LLM_API_ENDPOINT or LLM_API_KEY is not configured. Skipping LLM extraction.\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udd0d LLM utility ran but found no address data for ride 14526\nWARNING  app.llm_utility:llm_utility.py:59 LLM_API_ENDPOINT or LLM_API_KEY is not configured. Skipping LLM extraction.\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udd0d LLM utility ran but found no address data for ride 14492\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udcc6 Past event detected (Ride ID: 14446). Skipping results parsing for DB compatibility.\nWARNING  app.llm_utility:llm_utility.py:59 LLM_API_ENDPOINT or LLM_API_KEY is not configured. Skipping LLM extraction.\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udd0d LLM utility ran but found no address data for ride 14446\nINFO     app.base_scraper.AERC:logging_manager.py:68 Extracted 8 events\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\uddc2\ufe0f Consolidating 8 events\nINFO     app.base_scraper.AERC:logging_manager.py:68 \u2728 Consolidated to 6 events (1 multi-day events)\nWARNING  app.metrics_manager.AERC:logging_manager.py:79 \u26a0\ufe0f Created new metric &amp;#x27;events_consolidated&amp;#x27; that wasn&amp;#x27;t in standard metrics\nINFO     app.base_scraper.AERC:logging_manager.py:68 \u2705 Consolidated 6 events.\n\n&#34;}], &#34;tests/test_aerc_scraper.py::test_create_final_output&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_aerc_scraper.py::test_create_final_output&#34;, &#34;duration&#34;: &#34;78 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_aerc_scraper.py::test_create_final_output&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;78 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udd0d Found season ID/year map: {}\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udd0d Extracted season ID/year map from calendar page: {&amp;#x27;0&amp;#x27;: 0}\n2025-04-25 16:35:53 - app.base_scraper.AERC - WARNING - \u26a0\ufe0f No season IDs found for current/future years (2025, 2026). Using season IDs for most recent years []: []\n2025-04-25 16:35:53 - app.base_scraper.AERC - WARNING - \u26a0\ufe0f No valid season IDs with year found. Using all found season IDs: [&amp;#x27;0&amp;#x27;]\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udcd1 Fetched event HTML length: 26557\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udcdc Found 8 calendar rows\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udd0d LLM utility ran but found no address data for ride 14587\n2025-04-25 16:35:53 - app.metrics_manager.AERC - WARNING - \u26a0\ufe0f Created new metric &amp;#x27;llm_address_extractions_nodata&amp;#x27; that wasn&amp;#x27;t in standard metrics\n2025-04-25 16:35:53 - app.metrics_manager.AERC - WARNING - \u26a0\ufe0f Created new metric &amp;#x27;events_extracted&amp;#x27; that wasn&amp;#x27;t in standard metrics\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udd0d LLM utility ran but found no address data for ride 14546\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udd0d LLM utility ran but found no address data for ride 14457\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udd0d LLM utility ran but found no address data for ride 14457\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udd0d LLM utility ran but found no address data for ride 14457\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udd0d LLM utility ran but found no address data for ride 14526\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udd0d LLM utility ran but found no address data for ride 14492\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udcc6 Past event detected (Ride ID: 14446). Skipping results parsing for DB compatibility.\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udd0d LLM utility ran but found no address data for ride 14446\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - Extracted 8 events\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\uddc2\ufe0f Consolidating 8 events\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \u2728 Consolidated to 6 events (1 multi-day events)\n2025-04-25 16:35:53 - app.metrics_manager.AERC - WARNING - \u26a0\ufe0f Created new metric &amp;#x27;events_consolidated&amp;#x27; that wasn&amp;#x27;t in standard metrics\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \u2705 Consolidated 6 events.\n\n\ud83d\ude80 Scraping Summary for AERC \ud83d\ude80\nEvent Metrics:\n\ud83d\udcdc Raw Event Rows Found: 8\n\ud83d\udcc6 Initial Events Extracted: 8\n\u2728 Final Events (Consolidated): 0\n\ud83d\udcc5 Multi-Day Events: 1\n\nDatabase Metrics:\n\ud83d\udcbe Database Inserts: 0\n\ud83d\udd04 Database Updates: 0\n\nCache Metrics:\n\u2705 Cache Hits: 0\n\u274c Cache Misses: 0\n\nCustom Metrics:\nllm_address_extractions_nodata: 8\nevents_extracted: 8\nevents_consolidated: 6\n\n\u2705 All counts are valid!\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udce6 Creating final output\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \u2705 Final output created with 6 events\n2025-04-25 16:35:53 - app.metrics_manager.AERC - WARNING - \u26a0\ufe0f Created new metric &amp;#x27;validated_events&amp;#x27; that wasn&amp;#x27;t in standard metrics\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udcc1 Created final output for 6 events.\n\n------------------------------ Captured log call -------------------------------\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udd0d Found season ID/year map: {}\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udd0d Extracted season ID/year map from calendar page: {&amp;#x27;0&amp;#x27;: 0}\nWARNING  app.base_scraper.AERC:logging_manager.py:79 \u26a0\ufe0f No season IDs found for current/future years (2025, 2026). Using season IDs for most recent years []: []\nWARNING  app.base_scraper.AERC:logging_manager.py:79 \u26a0\ufe0f No valid season IDs with year found. Using all found season IDs: [&amp;#x27;0&amp;#x27;]\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udcd1 Fetched event HTML length: 26557\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udcdc Found 8 calendar rows\nWARNING  app.llm_utility:llm_utility.py:59 LLM_API_ENDPOINT or LLM_API_KEY is not configured. Skipping LLM extraction.\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udd0d LLM utility ran but found no address data for ride 14587\nWARNING  app.metrics_manager.AERC:logging_manager.py:79 \u26a0\ufe0f Created new metric &amp;#x27;llm_address_extractions_nodata&amp;#x27; that wasn&amp;#x27;t in standard metrics\nWARNING  app.metrics_manager.AERC:logging_manager.py:79 \u26a0\ufe0f Created new metric &amp;#x27;events_extracted&amp;#x27; that wasn&amp;#x27;t in standard metrics\nWARNING  app.llm_utility:llm_utility.py:59 LLM_API_ENDPOINT or LLM_API_KEY is not configured. Skipping LLM extraction.\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udd0d LLM utility ran but found no address data for ride 14546\nWARNING  app.llm_utility:llm_utility.py:59 LLM_API_ENDPOINT or LLM_API_KEY is not configured. Skipping LLM extraction.\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udd0d LLM utility ran but found no address data for ride 14457\nWARNING  app.llm_utility:llm_utility.py:59 LLM_API_ENDPOINT or LLM_API_KEY is not configured. Skipping LLM extraction.\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udd0d LLM utility ran but found no address data for ride 14457\nWARNING  app.llm_utility:llm_utility.py:59 LLM_API_ENDPOINT or LLM_API_KEY is not configured. Skipping LLM extraction.\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udd0d LLM utility ran but found no address data for ride 14457\nWARNING  app.llm_utility:llm_utility.py:59 LLM_API_ENDPOINT or LLM_API_KEY is not configured. Skipping LLM extraction.\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udd0d LLM utility ran but found no address data for ride 14526\nWARNING  app.llm_utility:llm_utility.py:59 LLM_API_ENDPOINT or LLM_API_KEY is not configured. Skipping LLM extraction.\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udd0d LLM utility ran but found no address data for ride 14492\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udcc6 Past event detected (Ride ID: 14446). Skipping results parsing for DB compatibility.\nWARNING  app.llm_utility:llm_utility.py:59 LLM_API_ENDPOINT or LLM_API_KEY is not configured. Skipping LLM extraction.\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udd0d LLM utility ran but found no address data for ride 14446\nINFO     app.base_scraper.AERC:logging_manager.py:68 Extracted 8 events\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\uddc2\ufe0f Consolidating 8 events\nINFO     app.base_scraper.AERC:logging_manager.py:68 \u2728 Consolidated to 6 events (1 multi-day events)\nWARNING  app.metrics_manager.AERC:logging_manager.py:79 \u26a0\ufe0f Created new metric &amp;#x27;events_consolidated&amp;#x27; that wasn&amp;#x27;t in standard metrics\nINFO     app.base_scraper.AERC:logging_manager.py:68 \u2705 Consolidated 6 events.\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udce6 Creating final output\nINFO     app.base_scraper.AERC:logging_manager.py:68 \u2705 Final output created with 6 events\nWARNING  app.metrics_manager.AERC:logging_manager.py:79 \u26a0\ufe0f Created new metric &amp;#x27;validated_events&amp;#x27; that wasn&amp;#x27;t in standard metrics\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udcc1 Created final output for 6 events.\n\n&#34;}], &#34;tests/test_aerc_scraper.py::test_extract_event_data&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_aerc_scraper.py::test_extract_event_data&#34;, &#34;duration&#34;: &#34;52 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_aerc_scraper.py::test_extract_event_data&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;52 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udd0d LLM utility ran but found no address data for ride 14587\n2025-04-25 16:35:53 - app.metrics_manager.AERC - WARNING - \u26a0\ufe0f Created new metric &amp;#x27;llm_address_extractions_nodata&amp;#x27; that wasn&amp;#x27;t in standard metrics\n2025-04-25 16:35:53 - app.metrics_manager.AERC - WARNING - \u26a0\ufe0f Created new metric &amp;#x27;events_extracted&amp;#x27; that wasn&amp;#x27;t in standard metrics\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udd0d LLM utility ran but found no address data for ride 14546\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udd0d LLM utility ran but found no address data for ride 14457\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udd0d LLM utility ran but found no address data for ride 14457\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udd0d LLM utility ran but found no address data for ride 14457\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udd0d LLM utility ran but found no address data for ride 14526\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udd0d LLM utility ran but found no address data for ride 14492\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udcc6 Past event detected (Ride ID: 14446). Skipping results parsing for DB compatibility.\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\udd0d LLM utility ran but found no address data for ride 14446\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - Extracted 8 events\n\n------------------------------ Captured log call -------------------------------\nWARNING  app.llm_utility:llm_utility.py:59 LLM_API_ENDPOINT or LLM_API_KEY is not configured. Skipping LLM extraction.\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udd0d LLM utility ran but found no address data for ride 14587\nWARNING  app.metrics_manager.AERC:logging_manager.py:79 \u26a0\ufe0f Created new metric &amp;#x27;llm_address_extractions_nodata&amp;#x27; that wasn&amp;#x27;t in standard metrics\nWARNING  app.metrics_manager.AERC:logging_manager.py:79 \u26a0\ufe0f Created new metric &amp;#x27;events_extracted&amp;#x27; that wasn&amp;#x27;t in standard metrics\nWARNING  app.llm_utility:llm_utility.py:59 LLM_API_ENDPOINT or LLM_API_KEY is not configured. Skipping LLM extraction.\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udd0d LLM utility ran but found no address data for ride 14546\nWARNING  app.llm_utility:llm_utility.py:59 LLM_API_ENDPOINT or LLM_API_KEY is not configured. Skipping LLM extraction.\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udd0d LLM utility ran but found no address data for ride 14457\nWARNING  app.llm_utility:llm_utility.py:59 LLM_API_ENDPOINT or LLM_API_KEY is not configured. Skipping LLM extraction.\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udd0d LLM utility ran but found no address data for ride 14457\nWARNING  app.llm_utility:llm_utility.py:59 LLM_API_ENDPOINT or LLM_API_KEY is not configured. Skipping LLM extraction.\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udd0d LLM utility ran but found no address data for ride 14457\nWARNING  app.llm_utility:llm_utility.py:59 LLM_API_ENDPOINT or LLM_API_KEY is not configured. Skipping LLM extraction.\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udd0d LLM utility ran but found no address data for ride 14526\nWARNING  app.llm_utility:llm_utility.py:59 LLM_API_ENDPOINT or LLM_API_KEY is not configured. Skipping LLM extraction.\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udd0d LLM utility ran but found no address data for ride 14492\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udcc6 Past event detected (Ride ID: 14446). Skipping results parsing for DB compatibility.\nWARNING  app.llm_utility:llm_utility.py:59 LLM_API_ENDPOINT or LLM_API_KEY is not configured. Skipping LLM extraction.\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\udd0d LLM utility ran but found no address data for ride 14446\nINFO     app.base_scraper.AERC:logging_manager.py:68 Extracted 8 events\n\n&#34;}], &#34;tests/test_aerc_scraper.py::test_helper_functions&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_aerc_scraper.py::test_helper_functions&#34;, &#34;duration&#34;: &#34;19 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_aerc_scraper.py::test_helper_functions&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;19 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_aerc_scraper.py::test_consolidate_events&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_aerc_scraper.py::test_consolidate_events&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_aerc_scraper.py::test_consolidate_events&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \ud83d\uddc2\ufe0f Consolidating 2 events\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \u2728 Consolidated to 1 events (1 multi-day events)\n2025-04-25 16:35:53 - app.metrics_manager.AERC - WARNING - \u26a0\ufe0f Created new metric &amp;#x27;events_consolidated&amp;#x27; that wasn&amp;#x27;t in standard metrics\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \u2705 Consolidated 1 events.\n\n------------------------------ Captured log call -------------------------------\nINFO     app.base_scraper.AERC:logging_manager.py:68 \ud83d\uddc2\ufe0f Consolidating 2 events\nINFO     app.base_scraper.AERC:logging_manager.py:68 \u2728 Consolidated to 1 events (1 multi-day events)\nWARNING  app.metrics_manager.AERC:logging_manager.py:79 \u26a0\ufe0f Created new metric &amp;#x27;events_consolidated&amp;#x27; that wasn&amp;#x27;t in standard metrics\nINFO     app.base_scraper.AERC:logging_manager.py:68 \u2705 Consolidated 1 events.\n\n&#34;}], &#34;tests/test_aerc_scraper.py::test_extract_event_data_with_llm&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_aerc_scraper.py::test_extract_event_data_with_llm&#34;, &#34;duration&#34;: &#34;4 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_aerc_scraper.py::test_extract_event_data_with_llm&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;4 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-04-25 16:35:53 - app.base_scraper.AERC - WARNING - \ud83e\udd37 Could not extract manager name.\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - \u2705 LLM successfully extracted address data for ride 67890\n2025-04-25 16:35:53 - app.metrics_manager.AERC - WARNING - \u26a0\ufe0f Created new metric &amp;#x27;llm_address_extractions_success&amp;#x27; that wasn&amp;#x27;t in standard metrics\n2025-04-25 16:35:53 - app.metrics_manager.AERC - WARNING - \u26a0\ufe0f Created new metric &amp;#x27;events_extracted&amp;#x27; that wasn&amp;#x27;t in standard metrics\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - Extracted 1 events\n\n------------------------------ Captured log call -------------------------------\nWARNING  app.base_scraper.AERC:logging_manager.py:79 \ud83e\udd37 Could not extract manager name.\nINFO     app.base_scraper.AERC:logging_manager.py:68 \u2705 LLM successfully extracted address data for ride 67890\nWARNING  app.metrics_manager.AERC:logging_manager.py:79 \u26a0\ufe0f Created new metric &amp;#x27;llm_address_extractions_success&amp;#x27; that wasn&amp;#x27;t in standard metrics\nWARNING  app.metrics_manager.AERC:logging_manager.py:79 \u26a0\ufe0f Created new metric &amp;#x27;events_extracted&amp;#x27; that wasn&amp;#x27;t in standard metrics\nINFO     app.base_scraper.AERC:logging_manager.py:68 Extracted 1 events\n\n&#34;}], &#34;tests/test_aerc_scraper.py::test_extract_event_data_llm_api_error&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_aerc_scraper.py::test_extract_event_data_llm_api_error&#34;, &#34;duration&#34;: &#34;4 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_aerc_scraper.py::test_extract_event_data_llm_api_error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;4 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-04-25 16:35:53 - app.metrics_manager.AERC - WARNING - \u26a0\ufe0f Created new metric &amp;#x27;llm_address_extractions_error&amp;#x27; that wasn&amp;#x27;t in standard metrics\n2025-04-25 16:35:53 - app.metrics_manager.AERC - WARNING - \u26a0\ufe0f Created new metric &amp;#x27;events_extracted&amp;#x27; that wasn&amp;#x27;t in standard metrics\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - Extracted 1 events\n\n------------------------------ Captured log call -------------------------------\nWARNING  app.metrics_manager.AERC:logging_manager.py:79 \u26a0\ufe0f Created new metric &amp;#x27;llm_address_extractions_error&amp;#x27; that wasn&amp;#x27;t in standard metrics\nWARNING  app.metrics_manager.AERC:logging_manager.py:79 \u26a0\ufe0f Created new metric &amp;#x27;events_extracted&amp;#x27; that wasn&amp;#x27;t in standard metrics\nINFO     app.base_scraper.AERC:logging_manager.py:68 Extracted 1 events\n\n&#34;}], &#34;tests/test_aerc_scraper.py::test_extract_event_data_llm_content_error&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_aerc_scraper.py::test_extract_event_data_llm_content_error&#34;, &#34;duration&#34;: &#34;5 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_aerc_scraper.py::test_extract_event_data_llm_content_error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;5 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-04-25 16:35:53 - app.metrics_manager.AERC - WARNING - \u26a0\ufe0f Created new metric &amp;#x27;llm_address_extractions_error&amp;#x27; that wasn&amp;#x27;t in standard metrics\n2025-04-25 16:35:53 - app.metrics_manager.AERC - WARNING - \u26a0\ufe0f Created new metric &amp;#x27;events_extracted&amp;#x27; that wasn&amp;#x27;t in standard metrics\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - Extracted 1 events\n\n------------------------------ Captured log call -------------------------------\nWARNING  app.metrics_manager.AERC:logging_manager.py:79 \u26a0\ufe0f Created new metric &amp;#x27;llm_address_extractions_error&amp;#x27; that wasn&amp;#x27;t in standard metrics\nWARNING  app.metrics_manager.AERC:logging_manager.py:79 \u26a0\ufe0f Created new metric &amp;#x27;events_extracted&amp;#x27; that wasn&amp;#x27;t in standard metrics\nINFO     app.base_scraper.AERC:logging_manager.py:68 Extracted 1 events\n\n&#34;}], &#34;tests/test_aerc_scraper.py::test_extract_event_data_llm_json_parsing_error&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_aerc_scraper.py::test_extract_event_data_llm_json_parsing_error&#34;, &#34;duration&#34;: &#34;6 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_aerc_scraper.py::test_extract_event_data_llm_json_parsing_error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;6 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-04-25 16:35:53 - app.metrics_manager.AERC - WARNING - \u26a0\ufe0f Created new metric &amp;#x27;llm_address_extractions_error&amp;#x27; that wasn&amp;#x27;t in standard metrics\n2025-04-25 16:35:53 - app.metrics_manager.AERC - WARNING - \u26a0\ufe0f Created new metric &amp;#x27;events_extracted&amp;#x27; that wasn&amp;#x27;t in standard metrics\n2025-04-25 16:35:53 - app.base_scraper.AERC - INFO - Extracted 1 events\n\n------------------------------ Captured log call -------------------------------\nWARNING  app.metrics_manager.AERC:logging_manager.py:79 \u26a0\ufe0f Created new metric &amp;#x27;llm_address_extractions_error&amp;#x27; that wasn&amp;#x27;t in standard metrics\nWARNING  app.metrics_manager.AERC:logging_manager.py:79 \u26a0\ufe0f Created new metric &amp;#x27;events_extracted&amp;#x27; that wasn&amp;#x27;t in standard metrics\nINFO     app.base_scraper.AERC:logging_manager.py:68 Extracted 1 events\n\n&#34;}], &#34;tests/test_base_scraper.py::test_init&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_base_scraper.py::test_init&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_base_scraper.py::test_init&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_base_scraper.py::test_get_html_success&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_base_scraper.py::test_get_html_success&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_base_scraper.py::test_get_html_success&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-04-25 16:35:53 - app.base_scraper.TEST - INFO - \u231b Cache miss for URL: https://example.com, fetching...\n\n------------------------------ Captured log call -------------------------------\nINFO     app.base_scraper.TEST:logging_manager.py:68 \u231b Cache miss for URL: https://example.com, fetching...\n\n&#34;}], &#34;tests/test_base_scraper.py::test_get_html_cached&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_base_scraper.py::test_get_html_cached&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_base_scraper.py::test_get_html_cached&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-04-25 16:35:53 - app.base_scraper.TEST - INFO - \ud83d\ude80 Cache hit for URL: https://example.com\n\n------------------------------ Captured log call -------------------------------\nINFO     app.base_scraper.TEST:logging_manager.py:68 \ud83d\ude80 Cache hit for URL: https://example.com\n\n&#34;}], &#34;tests/test_base_scraper.py::test_parse_html&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_base_scraper.py::test_parse_html&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_base_scraper.py::test_parse_html&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-04-25 16:35:53 - app.base_scraper.TEST - INFO - \ud83d\udcdc Found 0 calendar rows\n\n------------------------------ Captured log call -------------------------------\nINFO     app.base_scraper.TEST:logging_manager.py:68 \ud83d\udcdc Found 0 calendar rows\n\n&#34;}], &#34;tests/test_base_scraper.py::test_consolidate_events&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_base_scraper.py::test_consolidate_events&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_base_scraper.py::test_consolidate_events&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-04-25 16:35:53 - app.base_scraper.TEST - INFO - \ud83d\uddc2\ufe0f Consolidating 5 events\n2025-04-25 16:35:53 - app.base_scraper.TEST - INFO - \u2728 Consolidated to 2 events (2 multi-day events)\n2025-04-25 16:35:53 - app.metrics_manager.TEST - WARNING - \u26a0\ufe0f Created new metric &amp;#x27;events_consolidated&amp;#x27; that wasn&amp;#x27;t in standard metrics\n2025-04-25 16:35:53 - app.base_scraper.TEST - INFO - \u2705 Consolidated 2 events.\n\n------------------------------ Captured log call -------------------------------\nINFO     app.base_scraper.TEST:logging_manager.py:68 \ud83d\uddc2\ufe0f Consolidating 5 events\nINFO     app.base_scraper.TEST:logging_manager.py:68 \u2728 Consolidated to 2 events (2 multi-day events)\nWARNING  app.metrics_manager.TEST:logging_manager.py:79 \u26a0\ufe0f Created new metric &amp;#x27;events_consolidated&amp;#x27; that wasn&amp;#x27;t in standard metrics\nINFO     app.base_scraper.TEST:logging_manager.py:68 \u2705 Consolidated 2 events.\n\n&#34;}], &#34;tests/test_base_scraper.py::test_create_final_output&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_base_scraper.py::test_create_final_output&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_base_scraper.py::test_create_final_output&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-04-25 16:35:53 - app.base_scraper.TEST - INFO - \ud83d\udce6 Creating final output\n2025-04-25 16:35:53 - app.base_scraper.TEST - INFO - \u2705 Final output created with 1 events\n2025-04-25 16:35:53 - app.metrics_manager.TEST - WARNING - \u26a0\ufe0f Created new metric &amp;#x27;validated_events&amp;#x27; that wasn&amp;#x27;t in standard metrics\n2025-04-25 16:35:53 - app.base_scraper.TEST - INFO - \ud83d\udcc1 Created final output for 1 events.\n\n------------------------------ Captured log call -------------------------------\nINFO     app.base_scraper.TEST:logging_manager.py:68 \ud83d\udce6 Creating final output\nINFO     app.base_scraper.TEST:logging_manager.py:68 \u2705 Final output created with 1 events\nWARNING  app.metrics_manager.TEST:logging_manager.py:79 \u26a0\ufe0f Created new metric &amp;#x27;validated_events&amp;#x27; that wasn&amp;#x27;t in standard metrics\nINFO     app.base_scraper.TEST:logging_manager.py:68 \ud83d\udcc1 Created final output for 1 events.\n\n&#34;}], &#34;tests/test_base_scraper.py::test_metrics_property&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_base_scraper.py::test_metrics_property&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_base_scraper.py::test_metrics_property&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_base_scraper.py::test_display_metrics&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_base_scraper.py::test_display_metrics&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_base_scraper.py::test_display_metrics&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_cache.py::test_cache_hit&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_cache.py::test_cache_hit&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_cache.py::test_cache_hit&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_cache.py::test_cache_miss&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_cache.py::test_cache_miss&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_cache.py::test_cache_miss&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_cache.py::test_cache_ttl&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_cache.py::test_cache_ttl&#34;, &#34;duration&#34;: &#34;00:00:02&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_cache.py::test_cache_ttl&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;00:00:02&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_cache.py::test_cache_invalidate&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_cache.py::test_cache_invalidate&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_cache.py::test_cache_invalidate&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_cache.py::test_cache_maxsize&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_cache.py::test_cache_maxsize&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_cache.py::test_cache_maxsize&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_data_validator.py::test_init_data_validator&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_data_validator.py::test_init_data_validator&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_data_validator.py::test_init_data_validator&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_data_validator.py::test_validate_event_data_valid&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_data_validator.py::test_validate_event_data_valid&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_data_validator.py::test_validate_event_data_valid&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_data_validator.py::test_validate_event_data_invalid&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_data_validator.py::test_validate_event_data_invalid&#34;, &#34;duration&#34;: &#34;3 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_data_validator.py::test_validate_event_data_invalid&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;3 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_data_validator.py::test_validate_database_operation_insert_not_found&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_data_validator.py::test_validate_database_operation_insert_not_found&#34;, &#34;duration&#34;: &#34;3 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_data_validator.py::test_validate_database_operation_insert_not_found&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;3 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-04-25 16:35:55 - app.data_validator - ERROR - Event AERC-test-123 was not found in database after insert operation\n\n------------------------------ Captured log call -------------------------------\nERROR    app.data_validator:data_validator.py:55 Event AERC-test-123 was not found in database after insert operation\n\n&#34;}], &#34;tests/test_data_validator.py::test_validate_database_operation_delete_still_exists&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_data_validator.py::test_validate_database_operation_delete_still_exists&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_data_validator.py::test_validate_database_operation_delete_still_exists&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-04-25 16:35:55 - app.data_validator - ERROR - Event AERC-test-123 still exists in database after delete operation\n\n------------------------------ Captured log call -------------------------------\nERROR    app.data_validator:data_validator.py:61 Event AERC-test-123 still exists in database after delete operation\n\n&#34;}], &#34;tests/test_data_validator.py::test_validate_database_operation_insert_success&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_data_validator.py::test_validate_database_operation_insert_success&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_data_validator.py::test_validate_database_operation_insert_success&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_data_validator.py::test_validate_database_operation_update_success&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_data_validator.py::test_validate_database_operation_update_success&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_data_validator.py::test_validate_database_operation_update_success&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_data_validator.py::test_validate_deletion_success&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_data_validator.py::test_validate_deletion_success&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_data_validator.py::test_validate_deletion_success&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-04-25 16:35:55 - app.data_validator - INFO - Successfully validated deletion of event AERC-test-123\n\n------------------------------ Captured log call -------------------------------\nINFO     app.data_validator:data_validator.py:90 Successfully validated deletion of event AERC-test-123\n\n&#34;}], &#34;tests/test_data_validator.py::test_validate_deletion_failure&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_data_validator.py::test_validate_deletion_failure&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_data_validator.py::test_validate_deletion_failure&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-04-25 16:35:55 - app.data_validator - ERROR - Event AERC-test-123 still exists in database after delete operation\n\n------------------------------ Captured log call -------------------------------\nERROR    app.data_validator:data_validator.py:87 Event AERC-test-123 still exists in database after delete operation\n\n&#34;}], &#34;tests/test_data_validator.py::test_compare_event_data_match&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_data_validator.py::test_compare_event_data_match&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_data_validator.py::test_compare_event_data_match&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-04-25 16:35:55 - app.data_validator - INFO - Successfully validated event data for AERC-test-123\n\n------------------------------ Captured log call -------------------------------\nINFO     app.data_validator:data_validator.py:158 Successfully validated event data for AERC-test-123\n\n&#34;}], &#34;tests/test_data_validator.py::test_compare_event_data_missing_field&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_data_validator.py::test_compare_event_data_missing_field&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_data_validator.py::test_compare_event_data_missing_field&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-04-25 16:35:55 - app.data_validator - ERROR - Data validation failed for AERC-test-123:\n- Field &amp;#x27;name&amp;#x27; is missing in stored data\n\n------------------------------ Captured log call -------------------------------\nERROR    app.data_validator:data_validator.py:155 Data validation failed for AERC-test-123:\n- Field &amp;#x27;name&amp;#x27; is missing in stored data\n\n&#34;}], &#34;tests/test_data_validator.py::test_compare_event_data_value_mismatch&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_data_validator.py::test_compare_event_data_value_mismatch&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_data_validator.py::test_compare_event_data_value_mismatch&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-04-25 16:35:55 - app.data_validator - ERROR - Data validation failed for AERC-test-123:\n- Field &amp;#x27;name&amp;#x27; value mismatch: expected=Test Event, stored=Different Event Name\n\n------------------------------ Captured log call -------------------------------\nERROR    app.data_validator:data_validator.py:155 Data validation failed for AERC-test-123:\n- Field &amp;#x27;name&amp;#x27; value mismatch: expected=Test Event, stored=Different Event Name\n\n&#34;}], &#34;tests/test_data_validator.py::test_compare_event_data_jsonb_fields&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_data_validator.py::test_compare_event_data_jsonb_fields&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_data_validator.py::test_compare_event_data_jsonb_fields&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-04-25 16:35:55 - app.data_validator - INFO - Successfully validated event data for AERC-test-123\n\n------------------------------ Captured log call -------------------------------\nINFO     app.data_validator:data_validator.py:158 Successfully validated event data for AERC-test-123\n\n&#34;}], &#34;tests/test_data_validator.py::test_compare_event_data_skip_db_fields&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_data_validator.py::test_compare_event_data_skip_db_fields&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_data_validator.py::test_compare_event_data_skip_db_fields&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-04-25 16:35:55 - app.data_validator - INFO - Successfully validated event data for AERC-test-123\n\n------------------------------ Captured log call -------------------------------\nINFO     app.data_validator:data_validator.py:158 Successfully validated event data for AERC-test-123\n\n&#34;}], &#34;tests/test_data_validator.py::test_compare_event_data_invalid_jsonb&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_data_validator.py::test_compare_event_data_invalid_jsonb&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_data_validator.py::test_compare_event_data_invalid_jsonb&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-04-25 16:35:55 - app.data_validator - ERROR - Data validation failed for AERC-test-123:\n- Could not parse JSONB field &amp;#x27;distances&amp;#x27;: {invalid json\n\n------------------------------ Captured log call -------------------------------\nERROR    app.data_validator:data_validator.py:155 Data validation failed for AERC-test-123:\n- Could not parse JSONB field &amp;#x27;distances&amp;#x27;: {invalid json\n\n&#34;}], &#34;tests/test_database.py::test_create_tables&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_database.py::test_create_tables&#34;, &#34;duration&#34;: &#34;11 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_database.py::test_create_tables&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;11 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;---------------------------- Captured stdout setup -----------------------------\n2025-04-25 16:35:55 - app.database - INFO - SQLAlchemy engine and sessionmaker initialized.\n\n------------------------------ Captured log setup ------------------------------\nINFO     app.database:database.py:52 SQLAlchemy engine and sessionmaker initialized.\n\n----------------------------- Captured stdout call -----------------------------\n2025-04-25 16:35:55 - app.database - INFO - Events table created or already exists (via SQLAlchemy ORM)\n\n------------------------------ Captured log call -------------------------------\nINFO     app.database:database.py:197 Events table created or already exists (via SQLAlchemy ORM)\n\n&#34;}], &#34;tests/test_database.py::test_insert_and_get_event&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_database.py::test_insert_and_get_event&#34;, &#34;duration&#34;: &#34;11 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_database.py::test_insert_and_get_event&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;11 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;---------------------------- Captured stdout setup -----------------------------\n2025-04-25 16:35:55 - app.database - INFO - SQLAlchemy engine and sessionmaker initialized.\n\n------------------------------ Captured log setup ------------------------------\nINFO     app.database:database.py:52 SQLAlchemy engine and sessionmaker initialized.\n\n----------------------------- Captured stdout call -----------------------------\n2025-04-25 16:35:55 - app.database - INFO - Inserted new event: TEST - test-123\n\n------------------------------ Captured log call -------------------------------\nINFO     app.database:database.py:97 Inserted new event: TEST - test-123\n\n&#34;}], &#34;tests/test_database.py::test_update_event&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_database.py::test_update_event&#34;, &#34;duration&#34;: &#34;8 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_database.py::test_update_event&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;8 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;---------------------------- Captured stdout setup -----------------------------\n2025-04-25 16:35:55 - app.database - INFO - SQLAlchemy engine and sessionmaker initialized.\n\n------------------------------ Captured log setup ------------------------------\nINFO     app.database:database.py:52 SQLAlchemy engine and sessionmaker initialized.\n\n----------------------------- Captured stdout call -----------------------------\n2025-04-25 16:35:55 - app.database - INFO - Inserted new event: TEST - test-123\n2025-04-25 16:35:55 - app.database - INFO - Updated event: TEST - test-123\n\n------------------------------ Captured log call -------------------------------\nINFO     app.database:database.py:97 Inserted new event: TEST - test-123\nINFO     app.database:database.py:91 Updated event: TEST - test-123\n\n&#34;}], &#34;tests/test_database.py::test_get_events_by_source&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_database.py::test_get_events_by_source&#34;, &#34;duration&#34;: &#34;7 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_database.py::test_get_events_by_source&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;7 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;---------------------------- Captured stdout setup -----------------------------\n2025-04-25 16:35:55 - app.database - INFO - SQLAlchemy engine and sessionmaker initialized.\n\n------------------------------ Captured log setup ------------------------------\nINFO     app.database:database.py:52 SQLAlchemy engine and sessionmaker initialized.\n\n----------------------------- Captured stdout call -----------------------------\n2025-04-25 16:35:55 - app.database - INFO - Inserted new event: TEST - test-123\n\n------------------------------ Captured log call -------------------------------\nINFO     app.database:database.py:97 Inserted new event: TEST - test-123\n\n&#34;}], &#34;tests/test_database.py::test_delete_event&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_database.py::test_delete_event&#34;, &#34;duration&#34;: &#34;8 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_database.py::test_delete_event&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;8 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;---------------------------- Captured stdout setup -----------------------------\n2025-04-25 16:35:55 - app.database - INFO - SQLAlchemy engine and sessionmaker initialized.\n\n------------------------------ Captured log setup ------------------------------\nINFO     app.database:database.py:52 SQLAlchemy engine and sessionmaker initialized.\n\n----------------------------- Captured stdout call -----------------------------\n2025-04-25 16:35:55 - app.database - INFO - Inserted new event: TEST - test-123\n2025-04-25 16:35:55 - app.database - INFO - Successfully deleted event: TEST - test-123\n\n------------------------------ Captured log call -------------------------------\nINFO     app.database:database.py:97 Inserted new event: TEST - test-123\nINFO     app.database:database.py:176 Successfully deleted event: TEST - test-123\n\n&#34;}], &#34;tests/test_database.py::test_delete_event_not_found&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_database.py::test_delete_event_not_found&#34;, &#34;duration&#34;: &#34;6 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_database.py::test_delete_event_not_found&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;6 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;---------------------------- Captured stdout setup -----------------------------\n2025-04-25 16:35:55 - app.database - INFO - SQLAlchemy engine and sessionmaker initialized.\n\n------------------------------ Captured log setup ------------------------------\nINFO     app.database:database.py:52 SQLAlchemy engine and sessionmaker initialized.\n\n----------------------------- Captured stdout call -----------------------------\n2025-04-25 16:35:55 - app.database - INFO - Event TEST-nonexistent not found, nothing to delete\n\n------------------------------ Captured log call -------------------------------\nINFO     app.database:database.py:172 Event TEST-nonexistent not found, nothing to delete\n\n&#34;}], &#34;tests/test_integration.py::test_scraper_with_validator_integration&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_integration.py::test_scraper_with_validator_integration&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_integration.py::test_scraper_with_validator_integration&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-04-25 16:35:55 - app.data_validator - INFO - Successfully validated event data for TEST-event-123\n\n------------------------------ Captured log call -------------------------------\nINFO     app.data_validator:data_validator.py:158 Successfully validated event data for TEST-event-123\n\n&#34;}], &#34;tests/test_integration.py::test_scraper_with_validator_integration_mismatch&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_integration.py::test_scraper_with_validator_integration_mismatch&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_integration.py::test_scraper_with_validator_integration_mismatch&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-04-25 16:35:55 - app.data_validator - ERROR - Data validation failed for TEST-event-123:\n- Field &amp;#x27;name&amp;#x27; value mismatch: expected=Test Endurance Ride, stored=Different Name\n\n------------------------------ Captured log call -------------------------------\nERROR    app.data_validator:data_validator.py:155 Data validation failed for TEST-event-123:\n- Field &amp;#x27;name&amp;#x27; value mismatch: expected=Test Endurance Ride, stored=Different Name\n\n&#34;}], &#34;tests/test_integration.py::test_scraper_with_validator_jsonb_fields&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_integration.py::test_scraper_with_validator_jsonb_fields&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_integration.py::test_scraper_with_validator_jsonb_fields&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;----------------------------- Captured stdout call -----------------------------\n2025-04-25 16:35:55 - app.data_validator - INFO - Successfully validated event data for TEST-event-123\n\n------------------------------ Captured log call -------------------------------\nINFO     app.data_validator:data_validator.py:158 Successfully validated event data for TEST-event-123\n\n&#34;}], &#34;tests/test_llm_utility.py::test_extract_address_success&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_llm_utility.py::test_extract_address_success&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_llm_utility.py::test_extract_address_success&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_llm_utility.py::test_extract_address_api_error&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;tests/test_llm_utility.py::test_extract_address_api_error&#34;, &#34;duration&#34;: &#34;00:00:02&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_llm_utility.py::test_extract_address_api_error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;00:00:02&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;MagicMock name=&amp;#x27;post&amp;#x27; id=&amp;#x27;281473607731152&amp;#x27;&amp;gt;\n\n    def assert_called_once(self):\n        &amp;quot;&amp;quot;&amp;quot;assert that the mock was called only once.\n        &amp;quot;&amp;quot;&amp;quot;\n        if not self.call_count == 1:\n            msg = (&amp;quot;Expected &amp;#x27;%s&amp;#x27; to have been called once. Called %s times.%s&amp;quot;\n                   % (self._mock_name or &amp;#x27;mock&amp;#x27;,\n                      self.call_count,\n                      self._calls_repr()))\n&amp;gt;           raise AssertionError(msg)\nE           AssertionError: Expected &amp;#x27;post&amp;#x27; to have been called once. Called 3 times.\nE           Calls: [call(&amp;#x27;http://fake-llm-api.com&amp;#x27;, headers={&amp;#x27;Authorization&amp;#x27;: &amp;#x27;Bearer fake_api_key&amp;#x27;, &amp;#x27;Content-Type&amp;#x27;: &amp;#x27;application/json&amp;#x27;}, json={&amp;#x27;prompt&amp;#x27;: &amp;#x27;\\nExtract the address information (address, city, state, zip_code) from the following HTML snippet.\\nReturn the result as a JSON object with the following structure:\\n{&amp;quot;address&amp;quot;: &amp;quot;string | null&amp;quot;, &amp;quot;city&amp;quot;: &amp;quot;string | null&amp;quot;, &amp;quot;state&amp;quot;: &amp;quot;string | null&amp;quot;, &amp;quot;zip_code&amp;quot;: &amp;quot;string | null&amp;quot;}\\nIf a field cannot be found, use null for its value. Only return the JSON object, nothing else.\\n\\nHTML Snippet:\\n```html\\n&amp;lt;div&amp;gt;Some HTML content&amp;lt;/div&amp;gt;\\n```\\n\\nJSON Output:\\n&amp;#x27;, &amp;#x27;max_tokens&amp;#x27;: 150, &amp;#x27;temperature&amp;#x27;: 0.2}, timeout=10),\nE            call(&amp;#x27;http://fake-llm-api.com&amp;#x27;, headers={&amp;#x27;Authorization&amp;#x27;: &amp;#x27;Bearer fake_api_key&amp;#x27;, &amp;#x27;Content-Type&amp;#x27;: &amp;#x27;application/json&amp;#x27;}, json={&amp;#x27;prompt&amp;#x27;: &amp;#x27;\\nExtract the address information (address, city, state, zip_code) from the following HTML snippet.\\nReturn the result as a JSON object with the following structure:\\n{&amp;quot;address&amp;quot;: &amp;quot;string | null&amp;quot;, &amp;quot;city&amp;quot;: &amp;quot;string | null&amp;quot;, &amp;quot;state&amp;quot;: &amp;quot;string | null&amp;quot;, &amp;quot;zip_code&amp;quot;: &amp;quot;string | null&amp;quot;}\\nIf a field cannot be found, use null for its value. Only return the JSON object, nothing else.\\n\\nHTML Snippet:\\n```html\\n&amp;lt;div&amp;gt;Some HTML content&amp;lt;/div&amp;gt;\\n```\\n\\nJSON Output:\\n&amp;#x27;, &amp;#x27;max_tokens&amp;#x27;: 150, &amp;#x27;temperature&amp;#x27;: 0.2}, timeout=10),\nE            call(&amp;#x27;http://fake-llm-api.com&amp;#x27;, headers={&amp;#x27;Authorization&amp;#x27;: &amp;#x27;Bearer fake_api_key&amp;#x27;, &amp;#x27;Content-Type&amp;#x27;: &amp;#x27;application/json&amp;#x27;}, json={&amp;#x27;prompt&amp;#x27;: &amp;#x27;\\nExtract the address information (address, city, state, zip_code) from the following HTML snippet.\\nReturn the result as a JSON object with the following structure:\\n{&amp;quot;address&amp;quot;: &amp;quot;string | null&amp;quot;, &amp;quot;city&amp;quot;: &amp;quot;string | null&amp;quot;, &amp;quot;state&amp;quot;: &amp;quot;string | null&amp;quot;, &amp;quot;zip_code&amp;quot;: &amp;quot;string | null&amp;quot;}\\nIf a field cannot be found, use null for its value. Only return the JSON object, nothing else.\\n\\nHTML Snippet:\\n```html\\n&amp;lt;div&amp;gt;Some HTML content&amp;lt;/div&amp;gt;\\n```\\n\\nJSON Output:\\n&amp;#x27;, &amp;#x27;max_tokens&amp;#x27;: 150, &amp;#x27;temperature&amp;#x27;: 0.2}, timeout=10)].\n\n/usr/local/lib/python3.11/unittest/mock.py:918: AssertionError\n\nDuring handling of the above exception, another exception occurred:\n\nmock_post = &amp;lt;MagicMock name=&amp;#x27;post&amp;#x27; id=&amp;#x27;281473607731152&amp;#x27;&amp;gt;, mock_get_settings = &amp;lt;MagicMock name=&amp;#x27;get_settings&amp;#x27; id=&amp;#x27;281473607736464&amp;#x27;&amp;gt;\nmock_config = &amp;lt;MagicMock name=&amp;#x27;get_settings()&amp;#x27; id=&amp;#x27;281473607708624&amp;#x27;&amp;gt;\n\n    @patch(&amp;#x27;app.llm_utility.get_settings&amp;#x27;)\n    @patch(&amp;#x27;app.llm_utility.requests.post&amp;#x27;)\n    def test_extract_address_api_error(mock_post, mock_get_settings, mock_config):\n        # Configure the mock_get_settings to return our mock_config\n        mock_get_settings.return_value = mock_config\n    \n        mock_response = MagicMock()\n        mock_response.status_code = 500\n        mock_response.text = &amp;quot;Internal Server Error&amp;quot;\n        mock_post.side_effect = requests.exceptions.HTTPError(&amp;quot;500 Server Error&amp;quot;)\n        mock_post.return_value = mock_response\n        mock_response.raise_for_status.side_effect = requests.exceptions.HTTPError(&amp;quot;500 Server Error&amp;quot;)\n    \n        html_content = &amp;quot;&amp;lt;div&amp;gt;Some HTML content&amp;lt;/div&amp;gt;&amp;quot;\n        llm_utility = LLM_Utility()\n    \n        with pytest.raises(LLMAPIError) as excinfo:\n            llm_utility.extract_address_from_html(html_content)\n    \n&amp;gt;       mock_post.assert_called_once()\nE       AssertionError: Expected &amp;#x27;post&amp;#x27; to have been called once. Called 3 times.\nE       Calls: [call(&amp;#x27;http://fake-llm-api.com&amp;#x27;, headers={&amp;#x27;Authorization&amp;#x27;: &amp;#x27;Bearer fake_api_key&amp;#x27;, &amp;#x27;Content-Type&amp;#x27;: &amp;#x27;application/json&amp;#x27;}, json={&amp;#x27;prompt&amp;#x27;: &amp;#x27;\\nExtract the address information (address, city, state, zip_code) from the following HTML snippet.\\nReturn the result as a JSON object with the following structure:\\n{&amp;quot;address&amp;quot;: &amp;quot;string | null&amp;quot;, &amp;quot;city&amp;quot;: &amp;quot;string | null&amp;quot;, &amp;quot;state&amp;quot;: &amp;quot;string | null&amp;quot;, &amp;quot;zip_code&amp;quot;: &amp;quot;string | null&amp;quot;}\\nIf a field cannot be found, use null for its value. Only return the JSON object, nothing else.\\n\\nHTML Snippet:\\n```html\\n&amp;lt;div&amp;gt;Some HTML content&amp;lt;/div&amp;gt;\\n```\\n\\nJSON Output:\\n&amp;#x27;, &amp;#x27;max_tokens&amp;#x27;: 150, &amp;#x27;temperature&amp;#x27;: 0.2}, timeout=10),\nE        call(&amp;#x27;http://fake-llm-api.com&amp;#x27;, headers={&amp;#x27;Authorization&amp;#x27;: &amp;#x27;Bearer fake_api_key&amp;#x27;, &amp;#x27;Content-Type&amp;#x27;: &amp;#x27;application/json&amp;#x27;}, json={&amp;#x27;prompt&amp;#x27;: &amp;#x27;\\nExtract the address information (address, city, state, zip_code) from the following HTML snippet.\\nReturn the result as a JSON object with the following structure:\\n{&amp;quot;address&amp;quot;: &amp;quot;string | null&amp;quot;, &amp;quot;city&amp;quot;: &amp;quot;string | null&amp;quot;, &amp;quot;state&amp;quot;: &amp;quot;string | null&amp;quot;, &amp;quot;zip_code&amp;quot;: &amp;quot;string | null&amp;quot;}\\nIf a field cannot be found, use null for its value. Only return the JSON object, nothing else.\\n\\nHTML Snippet:\\n```html\\n&amp;lt;div&amp;gt;Some HTML content&amp;lt;/div&amp;gt;\\n```\\n\\nJSON Output:\\n&amp;#x27;, &amp;#x27;max_tokens&amp;#x27;: 150, &amp;#x27;temperature&amp;#x27;: 0.2}, timeout=10),\nE        call(&amp;#x27;http://fake-llm-api.com&amp;#x27;, headers={&amp;#x27;Authorization&amp;#x27;: &amp;#x27;Bearer fake_api_key&amp;#x27;, &amp;#x27;Content-Type&amp;#x27;: &amp;#x27;application/json&amp;#x27;}, json={&amp;#x27;prompt&amp;#x27;: &amp;#x27;\\nExtract the address information (address, city, state, zip_code) from the following HTML snippet.\\nReturn the result as a JSON object with the following structure:\\n{&amp;quot;address&amp;quot;: &amp;quot;string | null&amp;quot;, &amp;quot;city&amp;quot;: &amp;quot;string | null&amp;quot;, &amp;quot;state&amp;quot;: &amp;quot;string | null&amp;quot;, &amp;quot;zip_code&amp;quot;: &amp;quot;string | null&amp;quot;}\\nIf a field cannot be found, use null for its value. Only return the JSON object, nothing else.\\n\\nHTML Snippet:\\n```html\\n&amp;lt;div&amp;gt;Some HTML content&amp;lt;/div&amp;gt;\\n```\\n\\nJSON Output:\\n&amp;#x27;, &amp;#x27;max_tokens&amp;#x27;: 150, &amp;#x27;temperature&amp;#x27;: 0.2}, timeout=10)].\nE       \nE       pytest introspection follows:\nE       \nE       Args:\nE       assert (&amp;#x27;http://fake-llm-api.com&amp;#x27;,) == ()\nE         \nE         Left contains one more item: &amp;#x27;http://fake-llm-api.com&amp;#x27;\nE         \nE         Full diff:\nE         - ()\nE         + (\nE         +     &amp;#x27;http://fake-llm-api.com&amp;#x27;,\nE         + )\nE       Kwargs:\nE       assert {&amp;#x27;headers&amp;#x27;: {&amp;#x27;Authorization&amp;#x27;: &amp;#x27;Bearer fake_api_key&amp;#x27;, &amp;#x27;Content-Type&amp;#x27;: &amp;#x27;application/json&amp;#x27;}, &amp;#x27;json&amp;#x27;: {&amp;#x27;prompt&amp;#x27;: &amp;#x27;\\nExtract the address information (address, city, state, zip_code) from the following HTML snippet.\\nReturn the result as a JSON object with the following structure:\\n{&amp;quot;address&amp;quot;: &amp;quot;string | null&amp;quot;, &amp;quot;city&amp;quot;: &amp;quot;string | null&amp;quot;, &amp;quot;state&amp;quot;: &amp;quot;string | null&amp;quot;, &amp;quot;zip_code&amp;quot;: &amp;quot;string | null&amp;quot;}\\nIf a field cannot be found, use null for its value. Only return the JSON object, nothing else.\\n\\nHTML Snippet:\\n```html\\n&amp;lt;div&amp;gt;Some HTML content&amp;lt;/div&amp;gt;\\n```\\n\\nJSON Output:\\n&amp;#x27;, &amp;#x27;max_tokens&amp;#x27;: 150, &amp;#x27;temperature&amp;#x27;: 0.2}, &amp;#x27;timeout&amp;#x27;: 10} == {}\nE         \nE         Left contains 3 more items:\nE         {&amp;#x27;headers&amp;#x27;: {&amp;#x27;Authorization&amp;#x27;: &amp;#x27;Bearer fake_api_key&amp;#x27;,\nE                      &amp;#x27;Content-Type&amp;#x27;: &amp;#x27;application/json&amp;#x27;},\nE          &amp;#x27;json&amp;#x27;: {&amp;#x27;max_tokens&amp;#x27;: 150,\nE                   &amp;#x27;prompt&amp;#x27;: &amp;#x27;\\n&amp;#x27;\nE                             &amp;#x27;Extract the address information (address, city, state, &amp;#x27;\nE                             &amp;#x27;zip_code) from the following HTML snippet.\\n&amp;#x27;\nE                             &amp;#x27;Return the result as a JSON object with the following &amp;#x27;\nE                             &amp;#x27;structure:\\n&amp;#x27;\nE                             &amp;#x27;{&amp;quot;address&amp;quot;: &amp;quot;string | null&amp;quot;, &amp;quot;city&amp;quot;: &amp;quot;string | null&amp;quot;, &amp;#x27;\nE                             &amp;#x27;&amp;quot;state&amp;quot;: &amp;quot;string | null&amp;quot;, &amp;quot;zip_code&amp;quot;: &amp;quot;string | null&amp;quot;}\\n&amp;#x27;\nE                             &amp;#x27;If a field cannot be found, use null for its value. Only &amp;#x27;\nE                             &amp;#x27;return the JSON object, nothing else.\\n&amp;#x27;\nE                             &amp;#x27;\\n&amp;#x27;\nE                             &amp;#x27;HTML Snippet:\\n&amp;#x27;\nE                             &amp;#x27;```html\\n&amp;#x27;\nE                             &amp;#x27;&amp;lt;div&amp;gt;Some HTML content&amp;lt;/div&amp;gt;\\n&amp;#x27;\nE                             &amp;#x27;```\\n&amp;#x27;\nE                             &amp;#x27;\\n&amp;#x27;\nE                             &amp;#x27;JSON Output:\\n&amp;#x27;,\nE                   &amp;#x27;temperature&amp;#x27;: 0.2},\nE          &amp;#x27;timeout&amp;#x27;: 10}\nE         \nE         Full diff:\nE         - {}\nE         + {\nE         +     &amp;#x27;headers&amp;#x27;: {\nE         +         &amp;#x27;Authorization&amp;#x27;: &amp;#x27;Bearer fake_api_key&amp;#x27;,\nE         +         &amp;#x27;Content-Type&amp;#x27;: &amp;#x27;application/json&amp;#x27;,\nE         +     },\nE         +     &amp;#x27;json&amp;#x27;: {\nE         +         &amp;#x27;max_tokens&amp;#x27;: 150,\nE         +         &amp;#x27;prompt&amp;#x27;: &amp;#x27;\\n&amp;#x27;\nE         +         &amp;#x27;Extract the address information (address, city, state, zip_code) from &amp;#x27;\nE         +         &amp;#x27;the following HTML snippet.\\n&amp;#x27;\nE         +         &amp;#x27;Return the result as a JSON object with the following structure:\\n&amp;#x27;\nE         +         &amp;#x27;{&amp;quot;address&amp;quot;: &amp;quot;string | null&amp;quot;, &amp;quot;city&amp;quot;: &amp;quot;string | null&amp;quot;, &amp;quot;state&amp;quot;: &amp;#x27;\nE         +         &amp;#x27;&amp;quot;string | null&amp;quot;, &amp;quot;zip_code&amp;quot;: &amp;quot;string | null&amp;quot;}\\n&amp;#x27;\nE         +         &amp;#x27;If a field cannot be found, use null for its value. Only return the &amp;#x27;\nE         +         &amp;#x27;JSON object, nothing else.\\n&amp;#x27;\nE         +         &amp;#x27;\\n&amp;#x27;\nE         +         &amp;#x27;HTML Snippet:\\n&amp;#x27;\nE         +         &amp;#x27;```html\\n&amp;#x27;\nE         +         &amp;#x27;&amp;lt;div&amp;gt;Some HTML content&amp;lt;/div&amp;gt;\\n&amp;#x27;\nE         +         &amp;#x27;```\\n&amp;#x27;\nE         +         &amp;#x27;\\n&amp;#x27;\nE         +         &amp;#x27;JSON Output:\\n&amp;#x27;,\nE         +         &amp;#x27;temperature&amp;#x27;: 0.2,\nE         +     },\nE         +     &amp;#x27;timeout&amp;#x27;: 10,\nE         + }\n\ntests/test_llm_utility.py:86: AssertionError\n\n------------------------------ Captured log call -------------------------------\nWARNING  app.llm_utility:llm_utility.py:150 LLM API request failed (attempt 1/3): 500 Server Error\nWARNING  app.llm_utility:llm_utility.py:150 LLM API request failed (attempt 2/3): 500 Server Error\nWARNING  app.llm_utility:llm_utility.py:150 LLM API request failed (attempt 3/3): 500 Server Error\nERROR    app.llm_utility:llm_utility.py:155 LLM API request failed after multiple retries.\n\n&#34;}], &#34;tests/test_llm_utility.py::test_extract_address_request_exception&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_llm_utility.py::test_extract_address_request_exception&#34;, &#34;duration&#34;: &#34;00:00:02&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_llm_utility.py::test_extract_address_request_exception&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;00:00:02&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;------------------------------ Captured log call -------------------------------\nWARNING  app.llm_utility:llm_utility.py:150 LLM API request failed (attempt 1/3): Connection error\nWARNING  app.llm_utility:llm_utility.py:150 LLM API request failed (attempt 2/3): Connection error\nWARNING  app.llm_utility:llm_utility.py:150 LLM API request failed (attempt 3/3): Connection error\nERROR    app.llm_utility:llm_utility.py:155 LLM API request failed after multiple retries.\n\n&#34;}], &#34;tests/test_llm_utility.py::test_extract_address_malformed_json&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;tests/test_llm_utility.py::test_extract_address_malformed_json&#34;, &#34;duration&#34;: &#34;00:00:02&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_llm_utility.py::test_extract_address_malformed_json&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;00:00:02&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;cls = &amp;lt;class &amp;#x27;app.llm_utility.LLM_Utility&amp;#x27;&amp;gt;, html_snippet = &amp;#x27;&amp;lt;div&amp;gt;Some HTML content&amp;lt;/div&amp;gt;&amp;#x27;\n\n    @classmethod\n    def extract_address_from_html(cls, html_snippet: str) -&amp;gt; Optional[Dict[str, Optional[str]]]:\n        &amp;quot;&amp;quot;&amp;quot;\n        Sends an HTML snippet to the configured LLM endpoint to extract address details.\n    \n        Args:\n            html_snippet: The HTML text containing potential address information.\n    \n        Returns:\n            A dictionary with extracted address components (&amp;#x27;address&amp;#x27;, &amp;#x27;city&amp;#x27;, &amp;#x27;state&amp;#x27;, &amp;#x27;zip_code&amp;#x27;)\n            or None if extraction fails after retries or due to errors.\n    \n        Raises:\n            LLMAPIError: If there&amp;#x27;s a persistent issue connecting to the LLM API.\n            LLMContentError: If the LLM response indicates an issue (e.g., moderation).\n            LLMJsonParsingError: If the LLM response is not valid JSON.\n        &amp;quot;&amp;quot;&amp;quot;\n        settings = get_settings()\n        if not settings.LLM_API_ENDPOINT or not settings.LLM_API_KEY:\n            logger.warning(&amp;quot;LLM_API_ENDPOINT or LLM_API_KEY is not configured. Skipping LLM extraction.&amp;quot;)\n            return None\n    \n        prompt = cls._construct_prompt(html_snippet)\n        headers = {\n            &amp;quot;Authorization&amp;quot;: f&amp;quot;Bearer {settings.LLM_API_KEY}&amp;quot;,  # settings is now defined locally\n            &amp;quot;Content-Type&amp;quot;: &amp;quot;application/json&amp;quot;,\n        }\n        # This payload structure is hypothetical and depends on the specific LLM API\n        payload = {\n            &amp;quot;prompt&amp;quot;: prompt,\n            &amp;quot;max_tokens&amp;quot;: 150,  # Adjust as needed\n            &amp;quot;temperature&amp;quot;: 0.2,  # Adjust for desired creativity/determinism\n            # Add other parameters required by the specific LLM API\n        }\n    \n        last_exception: Optional[Exception] = LLMAPIError(&amp;quot;LLM request failed after all retries.&amp;quot;)  # Initialize with a default error\n    \n        for attempt in range(settings.LLM_MAX_RETRIES):\n            try:\n                response = requests.post(\n                    settings.LLM_API_ENDPOINT,  # settings is now defined locally\n                    headers=headers,\n                    json=payload,\n                    timeout=settings.LLM_REQUEST_TIMEOUT_SECONDS,\n                )\n                response.raise_for_status()  # Raise HTTPError for bad responses (4xx or 5xx)\n    \n                # --- LLM Response Handling (Highly dependent on the specific LLM API) ---\n                # 1. Check for LLM-specific errors (e.g., content flags)\n                # This part needs to be adapted based on the actual API response structure\n&amp;gt;               response_data = response.json()\n\napp/llm_utility.py:90: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n/usr/local/lib/python3.11/unittest/mock.py:1124: in __call__\n    return self._mock_call(*args, **kwargs)\n/usr/local/lib/python3.11/unittest/mock.py:1128: in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n/usr/local/lib/python3.11/unittest/mock.py:1183: in _execute_mock_call\n    raise effect\napp/llm_utility.py:90: in extract_address_from_html\n    response_data = response.json()\n/usr/local/lib/python3.11/unittest/mock.py:1124: in __call__\n    return self._mock_call(*args, **kwargs)\n/usr/local/lib/python3.11/unittest/mock.py:1128: in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n/usr/local/lib/python3.11/unittest/mock.py:1183: in _execute_mock_call\n    raise effect\napp/llm_utility.py:90: in extract_address_from_html\n    response_data = response.json()\n/usr/local/lib/python3.11/unittest/mock.py:1124: in __call__\n    return self._mock_call(*args, **kwargs)\n/usr/local/lib/python3.11/unittest/mock.py:1128: in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = &amp;lt;MagicMock name=&amp;#x27;post().json&amp;#x27; id=&amp;#x27;281473607695504&amp;#x27;&amp;gt;, args = (), kwargs = {}\neffect = JSONDecodeError(&amp;#x27;Invalid JSON: line 1 column 2 (char 1)&amp;#x27;)\n\n    def _execute_mock_call(self, /, *args, **kwargs):\n        # separate from _increment_mock_call so that awaited functions are\n        # executed separately from their call, also AsyncMock overrides this method\n    \n        effect = self.side_effect\n        if effect is not None:\n            if _is_exception(effect):\n&amp;gt;               raise effect\nE               json.decoder.JSONDecodeError: Invalid JSON: line 1 column 2 (char 1)\n\n/usr/local/lib/python3.11/unittest/mock.py:1183: JSONDecodeError\n\nThe above exception was the direct cause of the following exception:\n\nmock_post = &amp;lt;MagicMock name=&amp;#x27;post&amp;#x27; id=&amp;#x27;281473607686032&amp;#x27;&amp;gt;, mock_get_settings = &amp;lt;MagicMock name=&amp;#x27;get_settings&amp;#x27; id=&amp;#x27;281473607675728&amp;#x27;&amp;gt;\nmock_config = &amp;lt;MagicMock name=&amp;#x27;get_settings()&amp;#x27; id=&amp;#x27;281473607684432&amp;#x27;&amp;gt;\n\n    @patch(&amp;#x27;app.llm_utility.get_settings&amp;#x27;)\n    @patch(&amp;#x27;app.llm_utility.requests.post&amp;#x27;)\n    def test_extract_address_malformed_json(mock_post, mock_get_settings, mock_config):\n        # Configure the mock_get_settings to return our mock_config\n        mock_get_settings.return_value = mock_config\n    \n        mock_response = MagicMock()\n        mock_response.status_code = 200\n        mock_response.json.side_effect = json.JSONDecodeError(&amp;quot;Invalid JSON&amp;quot;, doc=&amp;quot;{}&amp;quot;, pos=1)\n        mock_post.return_value = mock_response\n    \n        html_content = &amp;quot;&amp;lt;div&amp;gt;Some HTML content&amp;lt;/div&amp;gt;&amp;quot;\n        llm_utility = LLM_Utility()\n    \n        with pytest.raises(LLMJsonParsingError):\n&amp;gt;           llm_utility.extract_address_from_html(html_content)\n\ntests/test_llm_utility.py:126: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\ncls = &amp;lt;class &amp;#x27;app.llm_utility.LLM_Utility&amp;#x27;&amp;gt;, html_snippet = &amp;#x27;&amp;lt;div&amp;gt;Some HTML content&amp;lt;/div&amp;gt;&amp;#x27;\n\n    @classmethod\n    def extract_address_from_html(cls, html_snippet: str) -&amp;gt; Optional[Dict[str, Optional[str]]]:\n        &amp;quot;&amp;quot;&amp;quot;\n        Sends an HTML snippet to the configured LLM endpoint to extract address details.\n    \n        Args:\n            html_snippet: The HTML text containing potential address information.\n    \n        Returns:\n            A dictionary with extracted address components (&amp;#x27;address&amp;#x27;, &amp;#x27;city&amp;#x27;, &amp;#x27;state&amp;#x27;, &amp;#x27;zip_code&amp;#x27;)\n            or None if extraction fails after retries or due to errors.\n    \n        Raises:\n            LLMAPIError: If there&amp;#x27;s a persistent issue connecting to the LLM API.\n            LLMContentError: If the LLM response indicates an issue (e.g., moderation).\n            LLMJsonParsingError: If the LLM response is not valid JSON.\n        &amp;quot;&amp;quot;&amp;quot;\n        settings = get_settings()\n        if not settings.LLM_API_ENDPOINT or not settings.LLM_API_KEY:\n            logger.warning(&amp;quot;LLM_API_ENDPOINT or LLM_API_KEY is not configured. Skipping LLM extraction.&amp;quot;)\n            return None\n    \n        prompt = cls._construct_prompt(html_snippet)\n        headers = {\n            &amp;quot;Authorization&amp;quot;: f&amp;quot;Bearer {settings.LLM_API_KEY}&amp;quot;,  # settings is now defined locally\n            &amp;quot;Content-Type&amp;quot;: &amp;quot;application/json&amp;quot;,\n        }\n        # This payload structure is hypothetical and depends on the specific LLM API\n        payload = {\n            &amp;quot;prompt&amp;quot;: prompt,\n            &amp;quot;max_tokens&amp;quot;: 150,  # Adjust as needed\n            &amp;quot;temperature&amp;quot;: 0.2,  # Adjust for desired creativity/determinism\n            # Add other parameters required by the specific LLM API\n        }\n    \n        last_exception: Optional[Exception] = LLMAPIError(&amp;quot;LLM request failed after all retries.&amp;quot;)  # Initialize with a default error\n    \n        for attempt in range(settings.LLM_MAX_RETRIES):\n            try:\n                response = requests.post(\n                    settings.LLM_API_ENDPOINT,  # settings is now defined locally\n                    headers=headers,\n                    json=payload,\n                    timeout=settings.LLM_REQUEST_TIMEOUT_SECONDS,\n                )\n                response.raise_for_status()  # Raise HTTPError for bad responses (4xx or 5xx)\n    \n                # --- LLM Response Handling (Highly dependent on the specific LLM API) ---\n                # 1. Check for LLM-specific errors (e.g., content flags)\n                # This part needs to be adapted based on the actual API response structure\n                response_data = response.json()\n                if response_data.get(&amp;quot;error&amp;quot;):  # Hypothetical error field\n                    error_msg = f&amp;quot;LLM API error: {response_data[&amp;#x27;error&amp;#x27;]}&amp;quot;\n                    logger.error(error_msg)\n                    # Don&amp;#x27;t retry on definitive API errors returned in the response body\n                    raise LLMContentError(error_msg)\n                if response_data.get(&amp;quot;blocked&amp;quot;, False):  # Hypothetical content flag\n                    logger.warning(&amp;quot;LLM response blocked due to content moderation.&amp;quot;)\n                    # Don&amp;#x27;t retry on content moderation blocks\n                    raise LLMContentError(&amp;quot;LLM response blocked due to content moderation.&amp;quot;)\n    \n                # 2. Extract the actual text content containing the JSON\n                # This is also hypothetical - adjust based on the API\n                llm_output_text = response_data.get(&amp;quot;choices&amp;quot;, [{}])[0].get(&amp;quot;text&amp;quot;, &amp;quot;&amp;quot;).strip()\n                if not llm_output_text:\n                    llm_output_text = response_data.get(&amp;quot;result&amp;quot;, &amp;quot;&amp;quot;).strip()  # Alternative structure\n                if not llm_output_text:\n                    logger.error(f&amp;quot;Could not extract text from LLM response: {response_data}&amp;quot;)\n                    # Don&amp;#x27;t retry if the response structure is wrong\n                    raise LLMContentError(&amp;quot;Could not extract text from LLM response.&amp;quot;)\n    \n                # 3. Parse the JSON\n                try:\n                    # Clean potential markdown code fences if the LLM includes them\n                    if llm_output_text.startswith(&amp;quot;```json&amp;quot;):\n                        llm_output_text = llm_output_text[7:]\n                    if llm_output_text.endswith(&amp;quot;```&amp;quot;):\n                        llm_output_text = llm_output_text[:-3]\n                    llm_output_text = llm_output_text.strip()\n    \n                    extracted_data = json.loads(llm_output_text)\n    \n                    # Basic validation of expected keys\n                    expected_keys = {&amp;quot;address&amp;quot;, &amp;quot;city&amp;quot;, &amp;quot;state&amp;quot;, &amp;quot;zip_code&amp;quot;}\n                    if not expected_keys.issubset(extracted_data.keys()):\n                        logger.warning(f&amp;quot;LLM JSON missing expected keys: {extracted_data}&amp;quot;)\n                        # Decide if this is an error or just return partial data/None\n                        # For now, treat as parsing error for simplicity\n                        # Don&amp;#x27;t retry if the format is wrong\n                        raise LLMJsonParsingError(&amp;quot;LLM JSON missing expected keys.&amp;quot;)\n    \n                    # Normalize empty strings to None if desired by spec\n                    for key in expected_keys:\n                        if extracted_data.get(key) == &amp;quot;&amp;quot;:\n                            extracted_data[key] = None\n    \n                    logger.info(f&amp;quot;Successfully extracted address via LLM: {extracted_data}&amp;quot;)\n                    return extracted_data\n    \n                except json.JSONDecodeError as e:\n                    logger.error(f&amp;quot;Failed to parse JSON from LLM response: {llm_output_text}&amp;quot;, exc_info=True)\n                    # Raise specific error to potentially handle differently upstream\n                    raise LLMJsonParsingError(f&amp;quot;Failed to parse JSON: {e}&amp;quot;) from e\n    \n            except (LLMContentError, LLMJsonParsingError) as e:\n                # Don&amp;#x27;t retry on content or parsing errors from the LLM itself\n                logger.error(f&amp;quot;LLM processing error: {e}&amp;quot;)\n                raise e  # Propagate the specific error\n    \n            except RequestException as e:\n                logger.warning(f&amp;quot;LLM API request failed (attempt {attempt + 1}/{settings.LLM_MAX_RETRIES}): {e}&amp;quot;)  # Use settings for max retries\n                last_exception = LLMAPIError(f&amp;quot;API request failed: {e}&amp;quot;)\n                if attempt &amp;lt; settings.LLM_MAX_RETRIES - 1:  # Use settings for max retries\n                    time.sleep(settings.LLM_RETRY_DELAY_SECONDS)  # Use settings for retry delay\n                else:\n                    logger.error(&amp;quot;LLM API request failed after multiple retries.&amp;quot;)\n                    # Ensure last_exception is an Exception before raising\n                    if isinstance(last_exception, Exception):\n                        raise last_exception from e\n                    else:  # Should not happen with the new initialization, but as a safeguard\n                        raise LLMAPIError(&amp;quot;LLM API request failed after multiple retries (unknown error).&amp;quot;) from e\n    \n            except (ValueError, TypeError, KeyError, json.decoder.JSONDecodeError) as e:  # Catch specific exceptions instead of generic Exception\n                logger.error(f&amp;quot;Unexpected error during LLM interaction (attempt {attempt + 1}): {e}&amp;quot;, exc_info=True)\n                last_exception = e  # Store the exception\n                if attempt &amp;lt; settings.LLM_MAX_RETRIES - 1:  # Use settings for max retries\n                    time.sleep(settings.LLM_RETRY_DELAY_SECONDS)  # Use settings for retry delay\n                else:\n                    logger.error(&amp;quot;Unexpected error persisted after retries during LLM interaction.&amp;quot;)\n                    # Raise a generic error wrapping the last exception\n&amp;gt;                   raise LLMAPIError(&amp;quot;An unexpected error occurred during LLM interaction.&amp;quot;) from last_exception\nE                   app.exceptions.LLMAPIError: An unexpected error occurred during LLM interaction.\n\napp/llm_utility.py:170: LLMAPIError\n\n------------------------------ Captured log call -------------------------------\nERROR    app.llm_utility:llm_utility.py:163 Unexpected error during LLM interaction (attempt 1): Invalid JSON: line 1 column 2 (char 1)\nTraceback (most recent call last):\n  File &amp;quot;/app/app/llm_utility.py&amp;quot;, line 90, in extract_address_from_html\n    response_data = response.json()\n                    ^^^^^^^^^^^^^^^\n  File &amp;quot;/usr/local/lib/python3.11/unittest/mock.py&amp;quot;, line 1124, in __call__\n    return self._mock_call(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;/usr/local/lib/python3.11/unittest/mock.py&amp;quot;, line 1128, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;/usr/local/lib/python3.11/unittest/mock.py&amp;quot;, line 1183, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Invalid JSON: line 1 column 2 (char 1)\nERROR    app.llm_utility:llm_utility.py:163 Unexpected error during LLM interaction (attempt 2): Invalid JSON: line 1 column 2 (char 1)\nTraceback (most recent call last):\n  File &amp;quot;/app/app/llm_utility.py&amp;quot;, line 90, in extract_address_from_html\n    response_data = response.json()\n                    ^^^^^^^^^^^^^^^\n  File &amp;quot;/usr/local/lib/python3.11/unittest/mock.py&amp;quot;, line 1124, in __call__\n    return self._mock_call(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;/usr/local/lib/python3.11/unittest/mock.py&amp;quot;, line 1128, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;/usr/local/lib/python3.11/unittest/mock.py&amp;quot;, line 1183, in _execute_mock_call\n    raise effect\n  File &amp;quot;/app/app/llm_utility.py&amp;quot;, line 90, in extract_address_from_html\n    response_data = response.json()\n                    ^^^^^^^^^^^^^^^\n  File &amp;quot;/usr/local/lib/python3.11/unittest/mock.py&amp;quot;, line 1124, in __call__\n    return self._mock_call(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;/usr/local/lib/python3.11/unittest/mock.py&amp;quot;, line 1128, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;/usr/local/lib/python3.11/unittest/mock.py&amp;quot;, line 1183, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Invalid JSON: line 1 column 2 (char 1)\nERROR    app.llm_utility:llm_utility.py:163 Unexpected error during LLM interaction (attempt 3): Invalid JSON: line 1 column 2 (char 1)\nTraceback (most recent call last):\n  File &amp;quot;/app/app/llm_utility.py&amp;quot;, line 90, in extract_address_from_html\n    response_data = response.json()\n                    ^^^^^^^^^^^^^^^\n  File &amp;quot;/usr/local/lib/python3.11/unittest/mock.py&amp;quot;, line 1124, in __call__\n    return self._mock_call(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;/usr/local/lib/python3.11/unittest/mock.py&amp;quot;, line 1128, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;/usr/local/lib/python3.11/unittest/mock.py&amp;quot;, line 1183, in _execute_mock_call\n    raise effect\n  File &amp;quot;/app/app/llm_utility.py&amp;quot;, line 90, in extract_address_from_html\n    response_data = response.json()\n                    ^^^^^^^^^^^^^^^\n  File &amp;quot;/usr/local/lib/python3.11/unittest/mock.py&amp;quot;, line 1124, in __call__\n    return self._mock_call(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;/usr/local/lib/python3.11/unittest/mock.py&amp;quot;, line 1128, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;/usr/local/lib/python3.11/unittest/mock.py&amp;quot;, line 1183, in _execute_mock_call\n    raise effect\n  File &amp;quot;/app/app/llm_utility.py&amp;quot;, line 90, in extract_address_from_html\n    response_data = response.json()\n                    ^^^^^^^^^^^^^^^\n  File &amp;quot;/usr/local/lib/python3.11/unittest/mock.py&amp;quot;, line 1124, in __call__\n    return self._mock_call(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;/usr/local/lib/python3.11/unittest/mock.py&amp;quot;, line 1128, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File &amp;quot;/usr/local/lib/python3.11/unittest/mock.py&amp;quot;, line 1183, in _execute_mock_call\n    raise effect\njson.decoder.JSONDecodeError: Invalid JSON: line 1 column 2 (char 1)\nERROR    app.llm_utility:llm_utility.py:168 Unexpected error persisted after retries during LLM interaction.\n\n&#34;}], &#34;tests/test_llm_utility.py::test_extract_address_content_error&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_llm_utility.py::test_extract_address_content_error&#34;, &#34;duration&#34;: &#34;2 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_llm_utility.py::test_extract_address_content_error&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;2 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;------------------------------ Captured log call -------------------------------\nERROR    app.llm_utility:llm_utility.py:93 LLM API error: {&amp;#x27;message&amp;#x27;: &amp;#x27;Content has been moderated.&amp;#x27;, &amp;#x27;code&amp;#x27;: 400, &amp;#x27;status&amp;#x27;: &amp;#x27;INVALID_ARGUMENT&amp;#x27;}\nERROR    app.llm_utility:llm_utility.py:146 LLM processing error: LLM API error: {&amp;#x27;message&amp;#x27;: &amp;#x27;Content has been moderated.&amp;#x27;, &amp;#x27;code&amp;#x27;: 400, &amp;#x27;status&amp;#x27;: &amp;#x27;INVALID_ARGUMENT&amp;#x27;}\n\n&#34;}], &#34;tests/test_llm_utility.py::test_extract_address_retry_logic&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Failed&#34;, &#34;testId&#34;: &#34;tests/test_llm_utility.py::test_extract_address_retry_logic&#34;, &#34;duration&#34;: &#34;3 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Failed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_llm_utility.py::test_extract_address_retry_logic&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;3 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;self = &amp;lt;MagicMock name=&amp;#x27;sleep&amp;#x27; id=&amp;#x27;281473611299152&amp;#x27;&amp;gt;\nargs = (&amp;lt;MagicMock name=&amp;#x27;get_settings().RETRY_DELAY_SECONDS&amp;#x27; id=&amp;#x27;281473611596368&amp;#x27;&amp;gt;,), kwargs = {}\nexpected = call(&amp;lt;MagicMock name=&amp;#x27;get_settings().RETRY_DELAY_SECONDS&amp;#x27; id=&amp;#x27;281473611596368&amp;#x27;&amp;gt;), actual = call(1)\n_error_message = &amp;lt;function NonCallableMock.assert_called_with.&amp;lt;locals&amp;gt;._error_message at 0xffffae883ec0&amp;gt;, cause = None\n\n    def assert_called_with(self, /, *args, **kwargs):\n        &amp;quot;&amp;quot;&amp;quot;assert that the last call was made with the specified arguments.\n    \n        Raises an AssertionError if the args and keyword args passed in are\n        different to the last call to the mock.&amp;quot;&amp;quot;&amp;quot;\n        if self.call_args is None:\n            expected = self._format_mock_call_signature(args, kwargs)\n            actual = &amp;#x27;not called.&amp;#x27;\n            error_message = (&amp;#x27;expected call not found.\\nExpected: %s\\n  Actual: %s&amp;#x27;\n                    % (expected, actual))\n            raise AssertionError(error_message)\n    \n        def _error_message():\n            msg = self._format_mock_failure_message(args, kwargs)\n            return msg\n        expected = self._call_matcher(_Call((args, kwargs), two=True))\n        actual = self._call_matcher(self.call_args)\n        if actual != expected:\n            cause = expected if isinstance(expected, Exception) else None\n&amp;gt;           raise AssertionError(_error_message()) from cause\nE           AssertionError: expected call not found.\nE           Expected: sleep(&amp;lt;MagicMock name=&amp;#x27;get_settings().RETRY_DELAY_SECONDS&amp;#x27; id=&amp;#x27;281473611596368&amp;#x27;&amp;gt;)\nE             Actual: sleep(1)\n\n/usr/local/lib/python3.11/unittest/mock.py:939: AssertionError\n\nDuring handling of the above exception, another exception occurred:\n\nmock_post = &amp;lt;MagicMock name=&amp;#x27;post&amp;#x27; id=&amp;#x27;281473611290192&amp;#x27;&amp;gt;, mock_sleep = &amp;lt;MagicMock name=&amp;#x27;sleep&amp;#x27; id=&amp;#x27;281473611299152&amp;#x27;&amp;gt;\nmock_get_settings = &amp;lt;MagicMock name=&amp;#x27;get_settings&amp;#x27; id=&amp;#x27;281473611293840&amp;#x27;&amp;gt;\nmock_config = &amp;lt;MagicMock name=&amp;#x27;get_settings()&amp;#x27; id=&amp;#x27;281473610055376&amp;#x27;&amp;gt;\n\n    @patch(&amp;#x27;app.llm_utility.get_settings&amp;#x27;)\n    @patch(&amp;#x27;app.llm_utility.time.sleep&amp;#x27;)\n    @patch(&amp;#x27;app.llm_utility.requests.post&amp;#x27;)\n    def test_extract_address_retry_logic(mock_post, mock_sleep, mock_get_settings, mock_config):\n        # Configure the mock_get_settings to return our mock_config\n        mock_get_settings.return_value = mock_config\n    \n        # Create a proper response object for the successful case\n        success_response = MagicMock()\n        success_response.status_code = 200\n        success_response.json.return_value = {\n            &amp;quot;choices&amp;quot;: [{\n                &amp;quot;text&amp;quot;: &amp;quot;&amp;quot;&amp;quot;\n    {\n        &amp;quot;address&amp;quot;: &amp;quot;456 Oak Ave&amp;quot;,\n        &amp;quot;city&amp;quot;: &amp;quot;Otherville&amp;quot;,\n        &amp;quot;state&amp;quot;: &amp;quot;NY&amp;quot;,\n        &amp;quot;zip_code&amp;quot;: &amp;quot;10001&amp;quot;\n    }&amp;quot;&amp;quot;&amp;quot;\n            }]\n        }\n    \n        # Simulate transient errors followed by success\n        mock_post.side_effect = [\n            requests.exceptions.RequestException(&amp;quot;Transient error 1&amp;quot;),\n            requests.exceptions.RequestException(&amp;quot;Transient error 2&amp;quot;),\n            success_response\n        ]\n    \n        html_content = &amp;quot;&amp;lt;div&amp;gt;Some HTML content&amp;lt;/div&amp;gt;&amp;quot;\n        llm_utility = LLM_Utility()\n        extracted_data = llm_utility.extract_address_from_html(html_content)\n    \n        assert extracted_data == {\n            &amp;quot;address&amp;quot;: &amp;quot;456 Oak Ave&amp;quot;,\n            &amp;quot;city&amp;quot;: &amp;quot;Otherville&amp;quot;,\n            &amp;quot;state&amp;quot;: &amp;quot;NY&amp;quot;,\n            &amp;quot;zip_code&amp;quot;: &amp;quot;10001&amp;quot;\n        }\n        # Expect 3 calls: initial attempt + 2 retries\n        assert mock_post.call_count == 3\n        # Expect 2 sleeps for 2 retries\n        assert mock_sleep.call_count == 2\n&amp;gt;       mock_sleep.assert_called_with(mock_config.RETRY_DELAY_SECONDS)  # Access attribute from mock settings instance\nE       AssertionError: expected call not found.\nE       Expected: sleep(&amp;lt;MagicMock name=&amp;#x27;get_settings().RETRY_DELAY_SECONDS&amp;#x27; id=&amp;#x27;281473611596368&amp;#x27;&amp;gt;)\nE         Actual: sleep(1)\nE       \nE       pytest introspection follows:\nE       \nE       Args:\nE       assert (1,) == (&amp;lt;MagicMock name=&amp;#x27;get_settings().RETRY_DELAY_SECONDS&amp;#x27; id=&amp;#x27;281473611596368&amp;#x27;&amp;gt;,)\nE         \nE         At index 0 diff: 1 != &amp;lt;MagicMock name=&amp;#x27;get_settings().RETRY_DELAY_SECONDS&amp;#x27; id=&amp;#x27;281473611596368&amp;#x27;&amp;gt;\nE         \nE         Full diff:\nE           (\nE         -     &amp;lt;MagicMock name=&amp;#x27;get_settings().RETRY_DELAY_SECONDS&amp;#x27; id=&amp;#x27;281473611596368&amp;#x27;&amp;gt;,\nE         +     1,\nE           )\n\ntests/test_llm_utility.py:205: AssertionError\n\n------------------------------ Captured log call -------------------------------\nWARNING  app.llm_utility:llm_utility.py:150 LLM API request failed (attempt 1/3): Transient error 1\nWARNING  app.llm_utility:llm_utility.py:150 LLM API request failed (attempt 2/3): Transient error 2\n\n&#34;}], &#34;tests/test_utils.py::test_parse_date_standard_format&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_utils.py::test_parse_date_standard_format&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_utils.py::test_parse_date_standard_format&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_utils.py::test_parse_date_alternate_formats&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_utils.py::test_parse_date_alternate_formats&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_utils.py::test_parse_date_alternate_formats&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_utils.py::test_parse_date_invalid&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_utils.py::test_parse_date_invalid&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_utils.py::test_parse_date_invalid&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_utils.py::test_parse_time_standard_format&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_utils.py::test_parse_time_standard_format&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_utils.py::test_parse_time_standard_format&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_utils.py::test_parse_time_alternate_formats&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_utils.py::test_parse_time_alternate_formats&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_utils.py::test_parse_time_alternate_formats&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_utils.py::test_parse_time_invalid&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_utils.py::test_parse_time_invalid&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_utils.py::test_parse_time_invalid&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[Cityville, CA-Cityville-CA-USA]&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[Cityville, CA-Cityville-CA-USA]&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_utils.py::test_extract_city_state_country_comprehensive[Cityville, CA-Cityville-CA-USA]&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[Some Place, Cityville, CA-Cityville-CA-USA]&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[Some Place, Cityville, CA-Cityville-CA-USA]&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_utils.py::test_extract_city_state_country_comprehensive[Some Place, Cityville, CA-Cityville-CA-USA]&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[123 Main St, Cityville, CA-Cityville-CA-USA]&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[123 Main St, Cityville, CA-Cityville-CA-USA]&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_utils.py::test_extract_city_state_country_comprehensive[123 Main St, Cityville, CA-Cityville-CA-USA]&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[Venue Name, Cityville, CA-Cityville-CA-USA]&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[Venue Name, Cityville, CA-Cityville-CA-USA]&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_utils.py::test_extract_city_state_country_comprehensive[Venue Name, Cityville, CA-Cityville-CA-USA]&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[Cityville CA-Cityville-CA-USA]&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[Cityville CA-Cityville-CA-USA]&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_utils.py::test_extract_city_state_country_comprehensive[Cityville CA-Cityville-CA-USA]&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[  Cityville,  CA  -Cityville-CA-USA]&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[  Cityville,  CA  -Cityville-CA-USA]&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_utils.py::test_extract_city_state_country_comprehensive[  Cityville,  CA  -Cityville-CA-USA]&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[Cityville, California-Cityville-None-USA]&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[Cityville, California-Cityville-None-USA]&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_utils.py::test_extract_city_state_country_comprehensive[Cityville, California-Cityville-None-USA]&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[Anytown, USA-Anytown-None-USA]&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[Anytown, USA-Anytown-None-USA]&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_utils.py::test_extract_city_state_country_comprehensive[Anytown, USA-Anytown-None-USA]&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[Townsborough, ON-Townsborough-ON-Canada]&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[Townsborough, ON-Townsborough-ON-Canada]&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_utils.py::test_extract_city_state_country_comprehensive[Townsborough, ON-Townsborough-ON-Canada]&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[The Ranch, Townsborough, ON-Townsborough-ON-Canada]&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[The Ranch, Townsborough, ON-Townsborough-ON-Canada]&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_utils.py::test_extract_city_state_country_comprehensive[The Ranch, Townsborough, ON-Townsborough-ON-Canada]&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[Townsborough ON-Townsborough-ON-Canada]&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[Townsborough ON-Townsborough-ON-Canada]&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_utils.py::test_extract_city_state_country_comprehensive[Townsborough ON-Townsborough-ON-Canada]&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[Maple Creek, SK, Canada-SK-Canada-USA]&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[Maple Creek, SK, Canada-SK-Canada-USA]&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_utils.py::test_extract_city_state_country_comprehensive[Maple Creek, SK, Canada-SK-Canada-USA]&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[Maple Creek, SK Canada-Maple Creek-None-USA]&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[Maple Creek, SK Canada-Maple Creek-None-USA]&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_utils.py::test_extract_city_state_country_comprehensive[Maple Creek, SK Canada-Maple Creek-None-USA]&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[National Park, Somewhere, AB-Somewhere-AB-Canada]&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[National Park, Somewhere, AB-Somewhere-AB-Canada]&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_utils.py::test_extract_city_state_country_comprehensive[National Park, Somewhere, AB-Somewhere-AB-Canada]&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[Only City-Only City-None-USA]&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[Only City-Only City-None-USA]&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_utils.py::test_extract_city_state_country_comprehensive[Only City-Only City-None-USA]&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[TX-None-TX-USA]&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[TX-None-TX-USA]&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_utils.py::test_extract_city_state_country_comprehensive[TX-None-TX-USA]&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[BC-None-BC-Canada]&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[BC-None-BC-Canada]&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_utils.py::test_extract_city_state_country_comprehensive[BC-None-BC-Canada]&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[-None-None-USA]&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[-None-None-USA]&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_utils.py::test_extract_city_state_country_comprehensive[-None-None-USA]&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[None-None-None-USA]&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[None-None-None-USA]&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_utils.py::test_extract_city_state_country_comprehensive[None-None-None-USA]&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[New York, NY Click Here for Directions via Google Maps-New York-NY-USA]&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[New York, NY Click Here for Directions via Google Maps-New York-NY-USA]&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_utils.py::test_extract_city_state_country_comprehensive[New York, NY Click Here for Directions via Google Maps-New York-NY-USA]&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[St. Louis, MO, -St. Louis-MO-USA]&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[St. Louis, MO, -St. Louis-MO-USA]&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_utils.py::test_extract_city_state_country_comprehensive[St. Louis, MO, -St. Louis-MO-USA]&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[, , St. Louis, MO, ,-St. Louis-MO-USA]&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[, , St. Louis, MO, ,-St. Louis-MO-USA]&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_utils.py::test_extract_city_state_country_comprehensive[, , St. Louis, MO, ,-St. Louis-MO-USA]&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[52 San Tomaso Rd, Alamogordo NM-Alamogordo-NM-USA]&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[52 San Tomaso Rd, Alamogordo NM-Alamogordo-NM-USA]&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_utils.py::test_extract_city_state_country_comprehensive[52 San Tomaso Rd, Alamogordo NM-Alamogordo-NM-USA]&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[Address Line 1, Address Line 2, Real City, NC-Real City-NC-USA]&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[Address Line 1, Address Line 2, Real City, NC-Real City-NC-USA]&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_utils.py::test_extract_city_state_country_comprehensive[Address Line 1, Address Line 2, Real City, NC-Real City-NC-USA]&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[City With Space, CA-City With Space-CA-USA]&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[City With Space, CA-City With Space-CA-USA]&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_utils.py::test_extract_city_state_country_comprehensive[City With Space, CA-City With Space-CA-USA]&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[City With Space CA-City With Space-CA-USA]&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_utils.py::test_extract_city_state_country_comprehensive[City With Space CA-City With Space-CA-USA]&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_utils.py::test_extract_city_state_country_comprehensive[City With Space CA-City With Space-CA-USA]&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}], &#34;tests/test_utils.py::test_generate_file_name&#34;: [{&#34;extras&#34;: [], &#34;result&#34;: &#34;Passed&#34;, &#34;testId&#34;: &#34;tests/test_utils.py::test_generate_file_name&#34;, &#34;duration&#34;: &#34;1 ms&#34;, &#34;resultsTableRow&#34;: [&#34;&lt;td class=\&#34;col-result\&#34;&gt;Passed&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-testId\&#34;&gt;tests/test_utils.py::test_generate_file_name&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-duration\&#34;&gt;1 ms&lt;/td&gt;&#34;, &#34;&lt;td class=\&#34;col-links\&#34;&gt;&lt;/td&gt;&#34;], &#34;log&#34;: &#34;No log output captured.&#34;}]}, &#34;renderCollapsed&#34;: [&#34;passed&#34;], &#34;initialSort&#34;: &#34;result&#34;, &#34;title&#34;: &#34;test-report.html&#34;}"></div>
    <script>
      (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
const { getCollapsedCategory, setCollapsedIds } = require('./storage.js')

class DataManager {
    setManager(data) {
        const collapsedCategories = [...getCollapsedCategory(data.renderCollapsed)]
        const collapsedIds = []
        const tests = Object.values(data.tests).flat().map((test, index) => {
            const collapsed = collapsedCategories.includes(test.result.toLowerCase())
            const id = `test_${index}`
            if (collapsed) {
                collapsedIds.push(id)
            }
            return {
                ...test,
                id,
                collapsed,
            }
        })
        const dataBlob = { ...data, tests }
        this.data = { ...dataBlob }
        this.renderData = { ...dataBlob }
        setCollapsedIds(collapsedIds)
    }

    get allData() {
        return { ...this.data }
    }

    resetRender() {
        this.renderData = { ...this.data }
    }

    setRender(data) {
        this.renderData.tests = [...data]
    }

    toggleCollapsedItem(id) {
        this.renderData.tests = this.renderData.tests.map((test) =>
            test.id === id ? { ...test, collapsed: !test.collapsed } : test,
        )
    }

    set allCollapsed(collapsed) {
        this.renderData = { ...this.renderData, tests: [...this.renderData.tests.map((test) => (
            { ...test, collapsed }
        ))] }
    }

    get testSubset() {
        return [...this.renderData.tests]
    }

    get environment() {
        return this.renderData.environment
    }

    get initialSort() {
        return this.data.initialSort
    }
}

module.exports = {
    manager: new DataManager(),
}

},{"./storage.js":8}],2:[function(require,module,exports){
const mediaViewer = require('./mediaviewer.js')
const templateEnvRow = document.getElementById('template_environment_row')
const templateResult = document.getElementById('template_results-table__tbody')

function htmlToElements(html) {
    const temp = document.createElement('template')
    temp.innerHTML = html
    return temp.content.childNodes
}

const find = (selector, elem) => {
    if (!elem) {
        elem = document
    }
    return elem.querySelector(selector)
}

const findAll = (selector, elem) => {
    if (!elem) {
        elem = document
    }
    return [...elem.querySelectorAll(selector)]
}

const dom = {
    getStaticRow: (key, value) => {
        const envRow = templateEnvRow.content.cloneNode(true)
        const isObj = typeof value === 'object' && value !== null
        const values = isObj ? Object.keys(value).map((k) => `${k}: ${value[k]}`) : null

        const valuesElement = htmlToElements(
            values ? `<ul>${values.map((val) => `<li>${val}</li>`).join('')}<ul>` : `<div>${value}</div>`)[0]
        const td = findAll('td', envRow)
        td[0].textContent = key
        td[1].appendChild(valuesElement)

        return envRow
    },
    getResultTBody: ({ testId, id, log, extras, resultsTableRow, tableHtml, result, collapsed }) => {
        const resultBody = templateResult.content.cloneNode(true)
        resultBody.querySelector('tbody').classList.add(result.toLowerCase())
        resultBody.querySelector('tbody').id = testId
        resultBody.querySelector('.collapsible').dataset.id = id

        resultsTableRow.forEach((html) => {
            const t = document.createElement('template')
            t.innerHTML = html
            resultBody.querySelector('.collapsible').appendChild(t.content)
        })

        if (log) {
            // Wrap lines starting with "E" with span.error to color those lines red
            const wrappedLog = log.replace(/^E.*$/gm, (match) => `<span class="error">${match}</span>`)
            resultBody.querySelector('.log').innerHTML = wrappedLog
        } else {
            resultBody.querySelector('.log').remove()
        }

        if (collapsed) {
            resultBody.querySelector('.collapsible > td')?.classList.add('collapsed')
            resultBody.querySelector('.extras-row').classList.add('hidden')
        } else {
            resultBody.querySelector('.collapsible > td')?.classList.remove('collapsed')
        }

        const media = []
        extras?.forEach(({ name, format_type, content }) => {
            if (['image', 'video'].includes(format_type)) {
                media.push({ path: content, name, format_type })
            }

            if (format_type === 'html') {
                resultBody.querySelector('.extraHTML').insertAdjacentHTML('beforeend', `<div>${content}</div>`)
            }
        })
        mediaViewer.setup(resultBody, media)

        // Add custom html from the pytest_html_results_table_html hook
        tableHtml?.forEach((item) => {
            resultBody.querySelector('td[class="extra"]').insertAdjacentHTML('beforeend', item)
        })

        return resultBody
    },
}

module.exports = {
    dom,
    htmlToElements,
    find,
    findAll,
}

},{"./mediaviewer.js":6}],3:[function(require,module,exports){
const { manager } = require('./datamanager.js')
const { doSort } = require('./sort.js')
const storageModule = require('./storage.js')

const getFilteredSubSet = (filter) =>
    manager.allData.tests.filter(({ result }) => filter.includes(result.toLowerCase()))

const doInitFilter = () => {
    const currentFilter = storageModule.getVisible()
    const filteredSubset = getFilteredSubSet(currentFilter)
    manager.setRender(filteredSubset)
}

const doFilter = (type, show) => {
    if (show) {
        storageModule.showCategory(type)
    } else {
        storageModule.hideCategory(type)
    }

    const currentFilter = storageModule.getVisible()
    const filteredSubset = getFilteredSubSet(currentFilter)
    manager.setRender(filteredSubset)

    const sortColumn = storageModule.getSort()
    doSort(sortColumn, true)
}

module.exports = {
    doFilter,
    doInitFilter,
}

},{"./datamanager.js":1,"./sort.js":7,"./storage.js":8}],4:[function(require,module,exports){
const { redraw, bindEvents, renderStatic } = require('./main.js')
const { doInitFilter } = require('./filter.js')
const { doInitSort } = require('./sort.js')
const { manager } = require('./datamanager.js')
const data = JSON.parse(document.getElementById('data-container').dataset.jsonblob)

function init() {
    manager.setManager(data)
    doInitFilter()
    doInitSort()
    renderStatic()
    redraw()
    bindEvents()
}

init()

},{"./datamanager.js":1,"./filter.js":3,"./main.js":5,"./sort.js":7}],5:[function(require,module,exports){
const { dom, find, findAll } = require('./dom.js')
const { manager } = require('./datamanager.js')
const { doSort } = require('./sort.js')
const { doFilter } = require('./filter.js')
const {
    getVisible,
    getCollapsedIds,
    setCollapsedIds,
    getSort,
    getSortDirection,
    possibleFilters,
} = require('./storage.js')

const removeChildren = (node) => {
    while (node.firstChild) {
        node.removeChild(node.firstChild)
    }
}

const renderStatic = () => {
    const renderEnvironmentTable = () => {
        const environment = manager.environment
        const rows = Object.keys(environment).map((key) => dom.getStaticRow(key, environment[key]))
        const table = document.getElementById('environment')
        removeChildren(table)
        rows.forEach((row) => table.appendChild(row))
    }
    renderEnvironmentTable()
}

const addItemToggleListener = (elem) => {
    elem.addEventListener('click', ({ target }) => {
        const id = target.parentElement.dataset.id
        manager.toggleCollapsedItem(id)

        const collapsedIds = getCollapsedIds()
        if (collapsedIds.includes(id)) {
            const updated = collapsedIds.filter((item) => item !== id)
            setCollapsedIds(updated)
        } else {
            collapsedIds.push(id)
            setCollapsedIds(collapsedIds)
        }
        redraw()
    })
}

const renderContent = (tests) => {
    const sortAttr = getSort(manager.initialSort)
    const sortAsc = JSON.parse(getSortDirection())
    const rows = tests.map(dom.getResultTBody)
    const table = document.getElementById('results-table')
    const tableHeader = document.getElementById('results-table-head')

    const newTable = document.createElement('table')
    newTable.id = 'results-table'

    // remove all sorting classes and set the relevant
    findAll('.sortable', tableHeader).forEach((elem) => elem.classList.remove('asc', 'desc'))
    tableHeader.querySelector(`.sortable[data-column-type="${sortAttr}"]`)?.classList.add(sortAsc ? 'desc' : 'asc')
    newTable.appendChild(tableHeader)

    if (!rows.length) {
        const emptyTable = document.getElementById('template_results-table__body--empty').content.cloneNode(true)
        newTable.appendChild(emptyTable)
    } else {
        rows.forEach((row) => {
            if (!!row) {
                findAll('.collapsible td:not(.col-links', row).forEach(addItemToggleListener)
                find('.logexpander', row).addEventListener('click',
                    (evt) => evt.target.parentNode.classList.toggle('expanded'),
                )
                newTable.appendChild(row)
            }
        })
    }

    table.replaceWith(newTable)
}

const renderDerived = () => {
    const currentFilter = getVisible()
    possibleFilters.forEach((result) => {
        const input = document.querySelector(`input[data-test-result="${result}"]`)
        input.checked = currentFilter.includes(result)
    })
}

const bindEvents = () => {
    const filterColumn = (evt) => {
        const { target: element } = evt
        const { testResult } = element.dataset

        doFilter(testResult, element.checked)
        const collapsedIds = getCollapsedIds()
        const updated = manager.renderData.tests.map((test) => {
            return {
                ...test,
                collapsed: collapsedIds.includes(test.id),
            }
        })
        manager.setRender(updated)
        redraw()
    }

    const header = document.getElementById('environment-header')
    header.addEventListener('click', () => {
        const table = document.getElementById('environment')
        table.classList.toggle('hidden')
        header.classList.toggle('collapsed')
    })

    findAll('input[name="filter_checkbox"]').forEach((elem) => {
        elem.addEventListener('click', filterColumn)
    })

    findAll('.sortable').forEach((elem) => {
        elem.addEventListener('click', (evt) => {
            const { target: element } = evt
            const { columnType } = element.dataset
            doSort(columnType)
            redraw()
        })
    })

    document.getElementById('show_all_details').addEventListener('click', () => {
        manager.allCollapsed = false
        setCollapsedIds([])
        redraw()
    })
    document.getElementById('hide_all_details').addEventListener('click', () => {
        manager.allCollapsed = true
        const allIds = manager.renderData.tests.map((test) => test.id)
        setCollapsedIds(allIds)
        redraw()
    })
}

const redraw = () => {
    const { testSubset } = manager

    renderContent(testSubset)
    renderDerived()
}

module.exports = {
    redraw,
    bindEvents,
    renderStatic,
}

},{"./datamanager.js":1,"./dom.js":2,"./filter.js":3,"./sort.js":7,"./storage.js":8}],6:[function(require,module,exports){
class MediaViewer {
    constructor(assets) {
        this.assets = assets
        this.index = 0
    }

    nextActive() {
        this.index = this.index === this.assets.length - 1 ? 0 : this.index + 1
        return [this.activeFile, this.index]
    }

    prevActive() {
        this.index = this.index === 0 ? this.assets.length - 1 : this.index -1
        return [this.activeFile, this.index]
    }

    get currentIndex() {
        return this.index
    }

    get activeFile() {
        return this.assets[this.index]
    }
}


const setup = (resultBody, assets) => {
    if (!assets.length) {
        resultBody.querySelector('.media').classList.add('hidden')
        return
    }

    const mediaViewer = new MediaViewer(assets)
    const container = resultBody.querySelector('.media-container')
    const leftArrow = resultBody.querySelector('.media-container__nav--left')
    const rightArrow = resultBody.querySelector('.media-container__nav--right')
    const mediaName = resultBody.querySelector('.media__name')
    const counter = resultBody.querySelector('.media__counter')
    const imageEl = resultBody.querySelector('img')
    const sourceEl = resultBody.querySelector('source')
    const videoEl = resultBody.querySelector('video')

    const setImg = (media, index) => {
        if (media?.format_type === 'image') {
            imageEl.src = media.path

            imageEl.classList.remove('hidden')
            videoEl.classList.add('hidden')
        } else if (media?.format_type === 'video') {
            sourceEl.src = media.path

            videoEl.classList.remove('hidden')
            imageEl.classList.add('hidden')
        }

        mediaName.innerText = media?.name
        counter.innerText = `${index + 1} / ${assets.length}`
    }
    setImg(mediaViewer.activeFile, mediaViewer.currentIndex)

    const moveLeft = () => {
        const [media, index] = mediaViewer.prevActive()
        setImg(media, index)
    }
    const doRight = () => {
        const [media, index] = mediaViewer.nextActive()
        setImg(media, index)
    }
    const openImg = () => {
        window.open(mediaViewer.activeFile.path, '_blank')
    }
    if (assets.length === 1) {
        container.classList.add('media-container--fullscreen')
    } else {
        leftArrow.addEventListener('click', moveLeft)
        rightArrow.addEventListener('click', doRight)
    }
    imageEl.addEventListener('click', openImg)
}

module.exports = {
    setup,
}

},{}],7:[function(require,module,exports){
const { manager } = require('./datamanager.js')
const storageModule = require('./storage.js')

const genericSort = (list, key, ascending, customOrder) => {
    let sorted
    if (customOrder) {
        sorted = list.sort((a, b) => {
            const aValue = a.result.toLowerCase()
            const bValue = b.result.toLowerCase()

            const aIndex = customOrder.findIndex((item) => item.toLowerCase() === aValue)
            const bIndex = customOrder.findIndex((item) => item.toLowerCase() === bValue)

            // Compare the indices to determine the sort order
            return aIndex - bIndex
        })
    } else {
        sorted = list.sort((a, b) => a[key] === b[key] ? 0 : a[key] > b[key] ? 1 : -1)
    }

    if (ascending) {
        sorted.reverse()
    }
    return sorted
}

const durationSort = (list, ascending) => {
    const parseDuration = (duration) => {
        if (duration.includes(':')) {
            // If it's in the format "HH:mm:ss"
            const [hours, minutes, seconds] = duration.split(':').map(Number)
            return (hours * 3600 + minutes * 60 + seconds) * 1000
        } else {
            // If it's in the format "nnn ms"
            return parseInt(duration)
        }
    }
    const sorted = list.sort((a, b) => parseDuration(a['duration']) - parseDuration(b['duration']))
    if (ascending) {
        sorted.reverse()
    }
    return sorted
}

const doInitSort = () => {
    const type = storageModule.getSort(manager.initialSort)
    const ascending = storageModule.getSortDirection()
    const list = manager.testSubset
    const initialOrder = ['Error', 'Failed', 'Rerun', 'XFailed', 'XPassed', 'Skipped', 'Passed']

    storageModule.setSort(type)
    storageModule.setSortDirection(ascending)

    if (type?.toLowerCase() === 'original') {
        manager.setRender(list)
    } else {
        let sortedList
        switch (type) {
        case 'duration':
            sortedList = durationSort(list, ascending)
            break
        case 'result':
            sortedList = genericSort(list, type, ascending, initialOrder)
            break
        default:
            sortedList = genericSort(list, type, ascending)
            break
        }
        manager.setRender(sortedList)
    }
}

const doSort = (type, skipDirection) => {
    const newSortType = storageModule.getSort(manager.initialSort) !== type
    const currentAsc = storageModule.getSortDirection()
    let ascending
    if (skipDirection) {
        ascending = currentAsc
    } else {
        ascending = newSortType ? false : !currentAsc
    }
    storageModule.setSort(type)
    storageModule.setSortDirection(ascending)

    const list = manager.testSubset
    const sortedList = type === 'duration' ? durationSort(list, ascending) : genericSort(list, type, ascending)
    manager.setRender(sortedList)
}

module.exports = {
    doInitSort,
    doSort,
}

},{"./datamanager.js":1,"./storage.js":8}],8:[function(require,module,exports){
const possibleFilters = [
    'passed',
    'skipped',
    'failed',
    'error',
    'xfailed',
    'xpassed',
    'rerun',
]

const getVisible = () => {
    const url = new URL(window.location.href)
    const settings = new URLSearchParams(url.search).get('visible')
    const lower = (item) => {
        const lowerItem = item.toLowerCase()
        if (possibleFilters.includes(lowerItem)) {
            return lowerItem
        }
        return null
    }
    return settings === null ?
        possibleFilters :
        [...new Set(settings?.split(',').map(lower).filter((item) => item))]
}

const hideCategory = (categoryToHide) => {
    const url = new URL(window.location.href)
    const visibleParams = new URLSearchParams(url.search).get('visible')
    const currentVisible = visibleParams ? visibleParams.split(',') : [...possibleFilters]
    const settings = [...new Set(currentVisible)].filter((f) => f !== categoryToHide).join(',')

    url.searchParams.set('visible', settings)
    window.history.pushState({}, null, unescape(url.href))
}

const showCategory = (categoryToShow) => {
    if (typeof window === 'undefined') {
        return
    }
    const url = new URL(window.location.href)
    const currentVisible = new URLSearchParams(url.search).get('visible')?.split(',').filter(Boolean) ||
        [...possibleFilters]
    const settings = [...new Set([categoryToShow, ...currentVisible])]
    const noFilter = possibleFilters.length === settings.length || !settings.length

    noFilter ? url.searchParams.delete('visible') : url.searchParams.set('visible', settings.join(','))
    window.history.pushState({}, null, unescape(url.href))
}

const getSort = (initialSort) => {
    const url = new URL(window.location.href)
    let sort = new URLSearchParams(url.search).get('sort')
    if (!sort) {
        sort = initialSort || 'result'
    }
    return sort
}

const setSort = (type) => {
    const url = new URL(window.location.href)
    url.searchParams.set('sort', type)
    window.history.pushState({}, null, unescape(url.href))
}

const getCollapsedCategory = (renderCollapsed) => {
    let categories
    if (typeof window !== 'undefined') {
        const url = new URL(window.location.href)
        const collapsedItems = new URLSearchParams(url.search).get('collapsed')
        switch (true) {
        case !renderCollapsed && collapsedItems === null:
            categories = ['passed']
            break
        case collapsedItems?.length === 0 || /^["']{2}$/.test(collapsedItems):
            categories = []
            break
        case /^all$/.test(collapsedItems) || collapsedItems === null && /^all$/.test(renderCollapsed):
            categories = [...possibleFilters]
            break
        default:
            categories = collapsedItems?.split(',').map((item) => item.toLowerCase()) || renderCollapsed
            break
        }
    } else {
        categories = []
    }
    return categories
}

const getSortDirection = () => JSON.parse(sessionStorage.getItem('sortAsc')) || false
const setSortDirection = (ascending) => sessionStorage.setItem('sortAsc', ascending)

const getCollapsedIds = () => JSON.parse(sessionStorage.getItem('collapsedIds')) || []
const setCollapsedIds = (list) => sessionStorage.setItem('collapsedIds', JSON.stringify(list))

module.exports = {
    getVisible,
    hideCategory,
    showCategory,
    getCollapsedIds,
    setCollapsedIds,
    getSort,
    setSort,
    getSortDirection,
    setSortDirection,
    getCollapsedCategory,
    possibleFilters,
}

},{}]},{},[4]);
    </script>
  </footer>
</html>